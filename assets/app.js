angular.module("winston",["ui.router"]),angular.module("winston").service("apiSVC",["$http",function(t){this.addNew=function(a){return t.post("/api/stats/add",a)},this.remove=function(){return t.get("/api/stats/remove")},this.load=function(){return t.get("/api/stats")}}]),angular.module("winston").controller("mainCTRL",["$scope","apiSVC","preloadObj",function(t,a,n){function s(a){_.forEach(t.players,function(n){function s(t){var a,n=[];_.forEach(t.games,function(s,e){if(3==t.id&&console.log(e,s),a||1!=s.g)if(a||s.g){if(null!=s.passing_comp&&(a.passing_comp+=s.passing_comp),null!=s.passing_yds&&(a.passing_yds+=s.passing_yds),null!=s.passing_td&&(a.passing_td+=s.passing_td),null!=s.passing_att&&(a.passing_att+=s.passing_att),null!=s.passing_int&&(a.passing_int+=s.passing_int),null!=a.passing_att&&0!=a.passing_att){var l=5*(a.passing_comp/a.passing_att-.3),i=.25*(a.passing_yds/a.passing_att-3),r=a.passing_td/a.passing_att*20,o=2.375-a.passing_int/a.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),o>2.375&&(o=2.375),0>o&&(o=0);var u=(l+i+r+o)/6*100;n.push({week:e+1,rating:Math.round(100*(u+1e-5))/100,pid:t.id})}}else n.push({week:e+1,rating:null,pid:t.id});else if(a={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0},null!=s.passing_comp&&(a.passing_comp+=s.passing_comp),null!=s.passing_yds&&(a.passing_yds+=s.passing_yds),null!=s.passing_td&&(a.passing_td+=s.passing_td),null!=s.passing_att&&(a.passing_att+=s.passing_att),null!=s.passing_int&&(a.passing_int+=s.passing_int),null!=a.passing_att&&0!=a.passing_att){var l=5*(a.passing_comp/a.passing_att-.3),i=.25*(a.passing_yds/a.passing_att-3),r=a.passing_td/a.passing_att*20,o=2.375-a.passing_int/a.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),o>2.375&&(o=2.375),0>o&&(o=0);var u=(l+i+r+o)/6*100;n.push({week:e+1,rating:Math.round(100*(u+1e-5))/100,pid:t.id})}});var s={};return _.forEach(n,function(t){s[t.week]=t}),3==t.id&&(console.log(s),console.log(n)),_.forEach(s,function(a,n){3==t.id&&console.log(a,n),a||(0!=n?(a=s[n-1],a.week++):(a.week=1,a.rating=null,a.pid=t.id))}),s}n.games=[],_.forEach(t.games,function(t){t.player==n.id&&n.games.push(t)}),_.sortBy(n.games,function(t){return t.week});var e=_.values(s(n));n.ratings=_.take(e,a),3==n.id&&(console.log(e),console.log(n.ratings))}),_.forEach(t.players,function(t){t.className="jameis",1!=t.id&&(t.className="other"),t.ratings.forEach(function(a,n){a?(a.week=+a.week,a.rating=a.rating,a.pid=t.id):0!=n&&null!=t.ratings[n]?t.ratings[n]={week:t.ratings[n].week+1,rating:t.ratings[n].rating,pid:t.id}:t.ratings[n]={week:n+1,rating:null,pid:t.id}})});var n={top:20,right:20,bottom:30,left:50},s=960-n.right-n.left,e=500-n.top-n.bottom,l=d3.scale.linear().range([0,s]),i=d3.scale.linear().range([e,0]),r=d3.svg.axis().scale(l).orient("bottom").tickValues(d3.range(1,a+1)).tickFormat(d3.format("d")),o=d3.svg.axis().scale(i).orient("left"),u=d3.svg.line().x(function(t){return l(t.week)}).y(function(t){return i(t.rating)}).interpolate("step-after"),c=d3.select("#graph").select_or_append("svg").attr("width",s+n.left+n.right).attr("height",e+n.top+n.bottom).select_or_append("g.container").attr("transform","translate("+n.left+","+n.top+")");l.domain([1,Number(a)]),i.domain([0,158.3]);var p=c.select_or_append("g.lines").selectAll("path").data(t.players.reverse(),function(t){return t?t.id:void 0});p.enter().append("path").attr("class",function(t){return t.className}).attr("name",function(t){return t.name}).attr("d",function(t){return u(t.ratings)}),p.attr("class",function(t){return t.className}).attr("name",function(t){return t.name}).transition().attr("d",function(t){return u(t.ratings)}),p.exit().remove(),c.select_or_append("g.x").attr("class","x axis").attr("transform","translate(0,"+e+")").call(r),c.select_or_append("g.y").attr("class","y axis").call(o).select_or_append("text.yaxis").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("QB Rating (cumulative)")}t._showInput=!1;var e=function(){return[{key:"week",val:null},{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]},l=function(){return[{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]};"err"==n.data.status&&console.log(n.data.message),t.gameStats=n.data.data.winston,t.stats=new e,t.Ustats=new l,t.newStats=function(){a.addNew(t.Ustats).success(function(n){"success"==n.status?(t.Ustats=new l,t.toggleInput(),a.load().success(function(a){t.gameStats=a.data.winston})):"game_pk"==n.message.constraint?alert("Error: That game already exists in the database. Delete it first if you want to update it"):alert("Error: "+JSON.stringify(n.message.detail))})},t.toggleInput=function(){t._showInput=!t._showInput},t.deleteRow=function(){0!=t.gameStats&&a.remove().success(function(n){"success"==n.status&&a.load().success(function(a){t.gameStats=a.data.winston})})},t.maxGames=function(){var a=0;_.forEach(t.players,function(t){t.games.length>a&&(a=t.games.length)});for(var n=[],s=1;a+1>s;s++)n.push(s);return n},t.players=n.data.data.players,t.games=n.data.data.games,_.forEach(t.players,function(a){a.games=[],_.forEach(t.games,function(t){t.player===a.id&&a.games.push(t)})});var i=function(t,a){function n(t){if(null!=t.passing_att&&0!=t.passing_att){var a=5*(e.passing_comp/e.passing_att-.3),n=.25*(e.passing_yds/e.passing_att-3),s=e.passing_td/e.passing_att*20,l=2.375-e.passing_int/e.passing_att*25;return a>2.375&&(a=2.375),0>a&&(a=0),n>2.375&&(n=2.375),0>n&&(n=0),s>2.375&&(s=2.375),0>s&&(s=0),l>2.375&&(l=2.375),0>l&&(l=0),(a+n+s+l)/6*100}}var s=_.take(t.games,a),e={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0};return _.forEach(s,function(t){null!=t.passing_comp&&(e.passing_comp+=t.passing_comp),null!=t.passing_yds&&(e.passing_yds+=t.passing_yds),null!=t.passing_td&&(e.passing_td+=t.passing_td),null!=t.passing_att&&(e.passing_att+=t.passing_att),null!=t.passing_int&&(e.passing_int+=t.passing_int)}),t.rating=n(e),t};t.ratePlayers=function(){t.chartActive=!0;var n=$("#week2rate").val().split(" ")[1],e=[];t.rated=[],a.load().success(function(a){t.players=a.data.players,t.games=a.data.games,t.gameStates=a.data.winston,_.forEach(t.players,function(a){a.games=[],_.forEach(t.games,function(t){t.player===a.id&&a.games.push(t)}),_.sortBy(a.games,function(t){return t.week})}),_.forEach(t.players,function(t){i(t,n),e.push({player:t.name,rating:Math.round(100*(t.rating+1e-5))/100,id:"p"+t.id})});var l=_.sortBy(e,function(t){return t.rating});l=_.filter(l,function(t){return t.rating}),_.forEach(l.reverse(),function(a,n){a.rank=n+1,t.rated.push(a)}),s(n)})},t.chartActive=!1,t.dl=function(){function t(){var t=[window.document],n=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var l=window.document.createElementNS(o.svg,"svg");window.document.body.appendChild(l);var i=getComputedStyle(l);[].forEach.call(iframes,function(a){try{a.contentDocument&&t.push(a.contentDocument)}catch(n){console.log(n)}}),[].forEach.call(objects,function(a){try{a.contentDocument&&t.push(a.contentDocument)}catch(n){console.log(n)}}),t.forEach(function(t){for(var a=s(t,i),e=0;e<a.length;e++)n.push(a[e])}),n.length>1?a(n):n.length>0?e(n[0]):alert("The Crowbar couldnâ€™t find any SVG nodes.")}function a(t){n(),t.forEach(function(a){t.forEach(function(t){a!==t&&Math.abs(a.top-t.top)<38&&Math.abs(a.left-t.left)<38&&(t.top+=38,t.left+=38)})});var a=document.createElement("div");r.appendChild(a),a.setAttribute("class","svg-crowbar"),a.style["z-index"]=1e7,a.style.position="absolute",a.style.top=0,a.style.left=0;var s=document.createElement("div");r.appendChild(s),s.setAttribute("class","svg-crowbar"),s.style.background="rgba(255, 255, 255, 0.7)",s.style.position="fixed",s.style.left=0,s.style.top=0,s.style.width="100%",s.style.height="100%",t.forEach(function(t,n){var s=document.createElement("div");a.appendChild(s),s.setAttribute("class","svg-crowbar"),s.style.position="absolute",s.style.top=t.top+document.body.scrollTop+"px",s.style.left=document.body.scrollLeft+t.left+"px",s.style.padding="4px",s.style["border-radius"]="3px",s.style.color="white",s.style["text-align"]="center",s.style["font-family"]="'Helvetica Neue'",s.style.background="rgba(0, 0, 0, 0.8)",s.style["box-shadow"]="0px 4px 18px rgba(0, 0, 0, 0.4)",s.style.cursor="move",s.textContent="SVG #"+n+": "+(t.id?"#"+t.id:"")+(t["class"]?"."+t["class"]:"");var l=document.createElement("button");s.appendChild(l),l.setAttribute("data-source-id",n),l.style.width="150px",l.style["font-size"]="12px",l.style["line-height"]="1.4em",l.style.margin="5px 0 0 0",l.textContent="Download",l.onclick=function(a){e(t)}})}function n(){var t=document.querySelectorAll(".svg-crowbar");[].forEach.call(t,function(t){t.parentNode.removeChild(t)})}function s(t,a){var n=[],s=t.querySelectorAll("svg");return[].forEach.call(s,function(t){t.setAttribute("version","1.1"),t.removeAttribute("xmlns"),t.removeAttribute("xlink"),t.hasAttributeNS(o.xmlns,"xmlns")||t.setAttributeNS(o.xmlns,"xmlns",o.svg),t.hasAttributeNS(o.xmlns,"xmlns:xlink")||t.setAttributeNS(o.xmlns,"xmlns:xlink",o.xlink),l(t,a);var s=(new XMLSerializer).serializeToString(t),e=t.getBoundingClientRect();n.push({top:e.top,left:e.left,width:e.width,height:e.height,"class":t.getAttribute("class"),id:t.getAttribute("id"),childElementCount:t.childElementCount,source:[i+s]})}),n}function e(t){var a="untitled";t.id?a=t.id:t["class"]?a=t["class"]:window.document.title&&(a=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase());var n=window.URL.createObjectURL(new Blob(t.source,{type:"text/xml"})),s=document.createElement("a");r.appendChild(s),s.setAttribute("class","svg-crowbar"),s.setAttribute("download",a+".svg"),s.setAttribute("href",n),s.style.display="none",s.click(),setTimeout(function(){window.URL.revokeObjectURL(n)},10)}function l(t,a){function n(t){var n,s,e,l,i=getComputedStyle(t),r="";for(n=0,s=i.length;s>n;n++)e=i[n],l=i.getPropertyValue(e),l!==a.getPropertyValue(e)&&(r+=e+":"+l+";");t.setAttribute("style",r)}function s(t){function a(t){if(t&&t.hasChildNodes())for(var s=t.firstChild;s;)1===s.nodeType&&"SCRIPT"!=s.nodeName&&(n.push(s),a(s)),s=s.nextSibling}var n=[];return n.push(t),a(t),n}for(var e=s(t),l=e.length;l--;)n(e[l])}var i='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';window.URL=window.URL||window.webkitURL;var r=document.body,o={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t()}}]),angular.module("winston").config(["$stateProvider",function(t,a){t.state("home",{url:"/",templateUrl:"updateStats.html",controller:"mainCTRL",resolve:{preloadObj:["$http",function(t){return t({method:"GET",url:"/api/stats"})}]}})}]).run(["$state",function(t){t.go("home")}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwaVNWQy5qcyIsIm1haW5DVExSTC5qcyIsInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImFkZE5ldyIsIml0ZW0iLCJwb3N0IiwicmVtb3ZlIiwiZ2V0IiwibG9hZCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJhcGlTVkMiLCJwcmVsb2FkT2JqIiwiZHJhd0dyYXBoaWNzIiwid2VlayIsIl8iLCJmb3JFYWNoIiwicGxheWVycyIsInBsYXllciIsImdldFJhdGluZ3MiLCJzdGF0c0N1bSIsInJhdGluZ3MiLCJnYW1lcyIsImdhbWUiLCJpbmRleCIsImlkIiwiY29uc29sZSIsImxvZyIsImciLCJwYXNzaW5nX2NvbXAiLCJwYXNzaW5nX3lkcyIsInBhc3NpbmdfdGQiLCJwYXNzaW5nX2F0dCIsInBhc3NpbmdfaW50IiwiYSIsImIiLCJjIiwiZCIsInJhdGluZyIsInB1c2giLCJNYXRoIiwicm91bmQiLCJwaWQiLCJyYXRpbmdPYmoiLCJpIiwic29ydEJ5IiwidmFsdWVzIiwidGFrZSIsImNsYXNzTmFtZSIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwieCIsImQzIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsInkiLCJ4QXhpcyIsInN2ZyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrVmFsdWVzIiwidGlja0Zvcm1hdCIsImZvcm1hdCIsInlBeGlzIiwibGluZSIsImludGVycG9sYXRlIiwic2VsZWN0Iiwic2VsZWN0X29yX2FwcGVuZCIsImF0dHIiLCJkb21haW4iLCJOdW1iZXIiLCJsaW5lcyIsInNlbGVjdEFsbCIsImRhdGEiLCJyZXZlcnNlIiwiZW50ZXIiLCJhcHBlbmQiLCJuYW1lIiwidHJhbnNpdGlvbiIsImV4aXQiLCJjYWxsIiwic3R5bGUiLCJ0ZXh0IiwiX3Nob3dJbnB1dCIsInN0YXRzIiwia2V5IiwidmFsIiwiVXN0YXRzIiwic3RhdHVzIiwibWVzc2FnZSIsImdhbWVTdGF0cyIsIndpbnN0b24iLCJuZXdTdGF0cyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0b2dnbGVJbnB1dCIsImNvbnN0cmFpbnQiLCJhbGVydCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXRhaWwiLCJkZWxldGVSb3ciLCJyZXNwb25zZSIsIm1heEdhbWVzIiwibWF4IiwibGVuZ3RoIiwid2Vla3MiLCJhY2N1bXVsYXRlU3RhdHMiLCJyYXRlIiwicmF0ZVBsYXllcnMiLCJjaGFydEFjdGl2ZSIsIiQiLCJzcGxpdCIsInJhdGVkIiwicGxheWVyc09iaiIsImdhbWVTdGF0ZXMiLCJyYW5rZWQiLCJmaWx0ZXIiLCJwIiwicmFuayIsImRsIiwiaW5pdGlhbGl6ZSIsImRvY3VtZW50cyIsIndpbmRvdyIsImRvY3VtZW50IiwiU1ZHU291cmNlcyIsImlmcmFtZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwib2JqZWN0cyIsImVtcHR5U3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwicHJlZml4IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImVsIiwiY29udGVudERvY3VtZW50IiwiZXJyIiwiZG9jIiwibmV3U291cmNlcyIsImdldFNvdXJjZXMiLCJjcmVhdGVQb3BvdmVyIiwiZG93bmxvYWQiLCJzb3VyY2VzIiwiY2xlYW51cCIsInMxIiwiczIiLCJhYnMiLCJidXR0b25zQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJhY2tncm91bmQiLCJidXR0b25XcmFwcGVyIiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsInRleHRDb250ZW50IiwiYnV0dG9uIiwib25jbGljayIsImNyb3diYXJFbGVtZW50cyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInN2Z0luZm8iLCJzdmdzIiwicmVtb3ZlQXR0cmlidXRlIiwiaGFzQXR0cmlidXRlTlMiLCJ4bWxucyIsInNldEF0dHJpYnV0ZU5TIiwieGxpbmsiLCJzZXRJbmxpbmVTdHlsZXMiLCJzb3VyY2UiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xhc3MiLCJnZXRBdHRyaWJ1dGUiLCJjaGlsZEVsZW1lbnRDb3VudCIsImRvY3R5cGUiLCJmaWxlbmFtZSIsInRpdGxlIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsInR5cGUiLCJjbGljayIsInNldFRpbWVvdXQiLCJyZXZva2VPYmplY3RVUkwiLCJleHBsaWNpdGx5U2V0U3R5bGUiLCJlbGVtZW50IiwibGVuIiwidmFsdWUiLCJjU1NTdHlsZURlY2xhcmF0aW9uQ29tcHV0ZWQiLCJjb21wdXRlZFN0eWxlU3RyIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInRyYXZlcnNlIiwib2JqIiwidmlzaXQiLCJub2RlIiwiaGFzQ2hpbGROb2RlcyIsImNoaWxkIiwiZmlyc3RDaGlsZCIsIm5vZGVUeXBlIiwibm9kZU5hbWUiLCJ0cmVlIiwibmV4dFNpYmxpbmciLCJhbGxFbGVtZW50cyIsIndlYmtpdFVSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic2VhcmNoU3ZjIiwic3RhdGUiLCJ0ZW1wbGF0ZVVybCIsInJlc29sdmUiLCJtZXRob2QiLCJydW4iLCIkc3RhdGUiLCJnbyJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsV0FBQSxjQ0RBRCxRQUFBQyxPQUFBLFdBQ0FDLFFBQUEsVUFBQSxRQUFBLFNBQUFDLEdBQ0FDLEtBQUFDLE9BQUEsU0FBQUMsR0FDQSxNQUFBSCxHQUFBSSxLQUFBLGlCQUFBRCxJQUVBRixLQUFBSSxPQUFBLFdBQ0EsTUFBQUwsR0FBQU0sSUFBQSxzQkFFQUwsS0FBQU0sS0FBQSxXQUNBLE1BQUFQLEdBQUFNLElBQUEsa0JDVEFULFFBQUFDLE9BQUEsV0FDQVUsV0FBQSxZ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QUEsZ0NBQ0FFLE1BQUEsK0JBQ0EvRyxJQUFBLDZCQUdBZ0UsU0NyZkFqSSxRQUFBQyxPQUFBLFdBQ0EwTixRQUFBLGlCQUFBLFNBQUFDLEVBQUFDLEdBRUFELEVBQUFFLE1BQUEsUUFDQS9CLElBQUEsSUFDQWdDLFlBQUEsbUJBQ0FwTixXQUFBLFdBQ0FxTixTQUNBbE4sWUFBQSxRQUFBLFNBQUFYLEdBQ0EsTUFBQUEsSUFBQThOLE9BQUEsTUFBQWxDLElBQUEsdUJBc0JBbUMsS0FBQSxTQUFBLFNBQUFDLEdBRUFBLEVBQUFDLEdBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBuZWVkcyB0byBiZSBsb2FkZWQgZmlyc3QgYmVjYXVzZSBpdCBkZWZpbmVzIHRoZSBkZXBlbmRlbmNpZXMuIFRoZSBndWxwIHRhc2sgd2lsbCBhbHdheXMgY29uY2F0IHRoaXMgdG8gdGhlIHRvcCBvZiBmaWxlXG5hbmd1bGFyLm1vZHVsZSgnd2luc3RvbicsIFsndWkucm91dGVyJ10pOyIsImFuZ3VsYXIubW9kdWxlKCd3aW5zdG9uJylcbi5zZXJ2aWNlKCdhcGlTVkMnLCBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICB0aGlzLmFkZE5ldyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zdGF0cy9hZGQnLGl0ZW0pXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9zdGF0cy9yZW1vdmUnKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RhdHMnKVxuICAgICAgICB9XG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ3dpbnN0b24nKVxuICAgIC5jb250cm9sbGVyKCdtYWluQ1RSTCcsZnVuY3Rpb24oJHNjb3BlLGFwaVNWQyxwcmVsb2FkT2JqKXtcbiAgICAgICAgJHNjb3BlLl9zaG93SW5wdXQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN0YXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2VlaycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2cnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZ3MnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19jb21wJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXR0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcGN0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfeWRzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXZnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfdGQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19pbnQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2snLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2t5JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcmF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2Z1bScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW1fbG9zdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBVc3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2cnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZ3MnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19jb21wJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXR0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcGN0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfeWRzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXZnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfdGQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19pbnQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2snLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2t5JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcmF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2Z1bScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW1fbG9zdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVsb2FkT2JqLmRhdGEuc3RhdHVzID09ICdlcnInKSBjb25zb2xlLmxvZyhwcmVsb2FkT2JqLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICRzY29wZS5nYW1lU3RhdHMgPSBwcmVsb2FkT2JqLmRhdGEuZGF0YS53aW5zdG9uO1xuICAgICAgICAkc2NvcGUuc3RhdHMgPSBuZXcgc3RhdHMoKTtcbiAgICAgICAgJHNjb3BlLlVzdGF0cyA9IG5ldyBVc3RhdHMoKTtcbiAgICAgICAgJHNjb3BlLm5ld1N0YXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBhcGlTVkMuYWRkTmV3KCRzY29wZS5Vc3RhdHMpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PSBcInN1Y2Nlc3NcIikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuVXN0YXRzID0gbmV3IFVzdGF0cygpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudG9nZ2xlSW5wdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgYXBpU1ZDLmxvYWQoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5nYW1lU3RhdHMgPSBkYXRhLmRhdGEud2luc3RvbjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdC5tZXNzYWdlLmNvbnN0cmFpbnQgPT0gJ2dhbWVfcGsnKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3I6IFRoYXQgZ2FtZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgZGF0YWJhc2UuIERlbGV0ZSBpdCBmaXJzdCBpZiB5b3Ugd2FudCB0byB1cGRhdGUgaXRcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiRXJyb3I6IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0Lm1lc3NhZ2UuZGV0YWlsKSlcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUudG9nZ2xlSW5wdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5fc2hvd0lucHV0ID0gISRzY29wZS5fc2hvd0lucHV0O1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuZGVsZXRlUm93ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLmdhbWVTdGF0cyAhPSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGFwaVNWQy5yZW1vdmUoKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaVNWQy5sb2FkKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdhbWVTdGF0cyA9IGRhdGEuZGF0YS53aW5zdG9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5tYXhHYW1lcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG1heCA9IDA7XG4gICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuZ2FtZXMubGVuZ3RoID4gbWF4KSBtYXggPSBwbGF5ZXIuZ2FtZXMubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgd2Vla3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgbWF4ICsgMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgd2Vla3MucHVzaChpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdlZWtzO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUucGxheWVycyA9IHByZWxvYWRPYmouZGF0YS5kYXRhLnBsYXllcnM7XG4gICAgICAgICRzY29wZS5nYW1lcyA9IHByZWxvYWRPYmouZGF0YS5kYXRhLmdhbWVzO1xuICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgcGxheWVyLmdhbWVzID0gW107XG4gICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGxheWVyID09PSBwbGF5ZXIuaWQpIHBsYXllci5nYW1lcy5wdXNoKGdhbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYWNjdW11bGF0ZVN0YXRzID0gZnVuY3Rpb24ocGxheWVyLCB3ZWVrKSB7XG4gICAgICAgICAgICB2YXIgZ2FtZXMgPSBfLnRha2UocGxheWVyLmdhbWVzLCB3ZWVrKTtcbiAgICAgICAgICAgIHZhciBzdGF0c0N1bSA9IHtcbiAgICAgICAgICAgICAgICBwYXNzaW5nX2NvbXA6MCxcbiAgICAgICAgICAgICAgICBwYXNzaW5nX3lkczogMCxcbiAgICAgICAgICAgICAgICBwYXNzaW5nX3RkOiAwLFxuICAgICAgICAgICAgICAgIHBhc3NpbmdfYXR0OiAwLFxuICAgICAgICAgICAgICAgIHBhc3NpbmdfaW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXy5mb3JFYWNoKGdhbWVzLGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2NvbXAgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19jb21wICs9IGdhbWUucGFzc2luZ19jb21wO1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfeWRzICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfeWRzICs9IGdhbWUucGFzc2luZ195ZHM7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ190ZCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX3RkICs9IGdhbWUucGFzc2luZ190ZDtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2F0dCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2F0dCArPSBnYW1lLnBhc3NpbmdfYXR0O1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfaW50ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfaW50ICs9IGdhbWUucGFzc2luZ19pbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJhdGUoc3RhdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHMucGFzc2luZ19hdHQgIT0gbnVsbCAmJiBzdGF0cy5wYXNzaW5nX2F0dCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGZvcm11bGEgZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXNzZXJfcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gKHN0YXRzQ3VtLnBhc3NpbmdfY29tcCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gLjMpICogNTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAoc3RhdHNDdW0ucGFzc2luZ195ZHMgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIDMpICogLjI1O1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IChzdGF0c0N1bS5wYXNzaW5nX3RkIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQpICogMjA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gMi4zNzUgLSAoc3RhdHNDdW0ucGFzc2luZ19pbnQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAqIDI1KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPiAyLjM3NSkgYSA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSA8IDApIGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYiA+IDIuMzc1KSBiID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiIDwgMCkgYiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID4gMi4zNzUpIGMgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPCAwKSBjID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPiAyLjM3NSkgZCA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDApIGQgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGEgKyBiICsgYyArIGQpIC8gNiAqIDEwMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBsYXllci5yYXRpbmcgPSByYXRlKHN0YXRzQ3VtKTtcbiAgICAgICAgICAgIHJldHVybiBwbGF5ZXI7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5yYXRlUGxheWVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLmNoYXJ0QWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciB3ZWVrID0gJCgnI3dlZWsycmF0ZScpLnZhbCgpLnNwbGl0KCcgJylbMV07XG4gICAgICAgICAgICB2YXIgcmF0ZWQgPSBbXTtcbiAgICAgICAgICAgICRzY29wZS5yYXRlZCA9IFtdO1xuICAgICAgICAgICAgYXBpU1ZDLmxvYWQoKS5zdWNjZXNzKGZ1bmN0aW9uKHBsYXllcnNPYmopIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucGxheWVycyA9IHBsYXllcnNPYmouZGF0YS5wbGF5ZXJzO1xuICAgICAgICAgICAgICAgICRzY29wZS5nYW1lcyA9IHBsYXllcnNPYmouZGF0YS5nYW1lcztcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2FtZVN0YXRlcyA9IHBsYXllcnNPYmouZGF0YS53aW5zdG9uO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5nYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wbGF5ZXIgPT09IHBsYXllci5pZCkgcGxheWVyLmdhbWVzLnB1c2goZ2FtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBfLnNvcnRCeShwbGF5ZXIuZ2FtZXMsIGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lLndlZWs7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjY3VtdWxhdGVTdGF0cyhwbGF5ZXIsd2Vlayk7XG4gICAgICAgICAgICAgICAgICAgIHJhdGVkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJwbGF5ZXJcIjpwbGF5ZXIubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmF0aW5nXCI6TWF0aC5yb3VuZCgocGxheWVyLnJhdGluZyArIDAuMDAwMDEpICogMTAwKSAvIDEwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjpcInBcIitwbGF5ZXIuaWRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgcmFua2VkID0gXy5zb3J0QnkocmF0ZWQsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGxheWVyLnJhdGluZztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByYW5rZWQgPSBfLmZpbHRlcihyYW5rZWQsIGZ1bmN0aW9uKHApe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5yYXRpbmc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJhbmtlZC5yZXZlcnNlKCksZnVuY3Rpb24ocGxheWVyLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmFuayA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJhdGVkLnB1c2gocGxheWVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkcmF3R3JhcGhpY3Mod2Vlayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gZHJhd0dyYXBoaWNzKHdlZWspIHtcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLmdhbWVzID0gW107XG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5nYW1lcywgZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wbGF5ZXIgPT0gcGxheWVyLmlkKSBwbGF5ZXIuZ2FtZXMucHVzaChnYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfLnNvcnRCeShwbGF5ZXIuZ2FtZXMsIGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdhbWUud2VlaztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRSYXRpbmdzKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW5ncyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHNDdW07XG4gICAgICAgICAgICAgICAgICAgIF8uZm9yRWFjaChwbGF5ZXIuZ2FtZXMsZnVuY3Rpb24oZ2FtZSxpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCA9PSAzKSBjb25zb2xlLmxvZyhpbmRleCxnYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdHNDdW0gJiYgZ2FtZS5nID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0c0N1bSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2luZ19jb21wOjAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpbmdfeWRzOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaW5nX3RkOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaW5nX2F0dDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2luZ19pbnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfY29tcCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2NvbXAgKz0gZ2FtZS5wYXNzaW5nX2NvbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ195ZHMgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ195ZHMgKz0gZ2FtZS5wYXNzaW5nX3lkcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3RkICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfdGQgKz0gZ2FtZS5wYXNzaW5nX3RkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfYXR0ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICs9IGdhbWUucGFzc2luZ19hdHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19pbnQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19pbnQgKz0gZ2FtZS5wYXNzaW5nX2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHNDdW0ucGFzc2luZ19hdHQgIT0gbnVsbCAmJiBzdGF0c0N1bS5wYXNzaW5nX2F0dCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcm11bGEgZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXNzZXJfcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gKHN0YXRzQ3VtLnBhc3NpbmdfY29tcCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gLjMpICogNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAoc3RhdHNDdW0ucGFzc2luZ195ZHMgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIDMpICogLjI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IChzdGF0c0N1bS5wYXNzaW5nX3RkIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQpICogMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gMi4zNzUgLSAoc3RhdHNDdW0ucGFzc2luZ19pbnQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAqIDI1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPiAyLjM3NSkgYSA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA8IDApIGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA+IDIuMzc1KSBiID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiIDwgMCkgYiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID4gMi4zNzUpIGMgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPCAwKSBjID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPiAyLjM3NSkgZCA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDApIGQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW5nID0gKGErYitjK2QpLzYqMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdzLnB1c2goe1wid2Vla1wiOmluZGV4ICsgMSwgXCJyYXRpbmdcIjpNYXRoLnJvdW5kKChyYXRpbmcgKyAwLjAwMDAxKSAqIDEwMCkgLyAxMDAsXCJwaWRcIjpwbGF5ZXIuaWR9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXN0YXRzQ3VtICYmICFnYW1lLmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdzLnB1c2goe1wid2Vla1wiOmluZGV4ICsgMSxcInJhdGluZ1wiOm51bGwsXCJwaWRcIjpwbGF5ZXIuaWR9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19jb21wICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfY29tcCArPSBnYW1lLnBhc3NpbmdfY29tcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3lkcyAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX3lkcyArPSBnYW1lLnBhc3NpbmdfeWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfdGQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ190ZCArPSBnYW1lLnBhc3NpbmdfdGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19hdHQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19hdHQgKz0gZ2FtZS5wYXNzaW5nX2F0dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2ludCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2ludCArPSBnYW1lLnBhc3NpbmdfaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0c0N1bS5wYXNzaW5nX2F0dCAhPSBudWxsICYmIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9ybXVsYSBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1Bhc3Nlcl9yYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAoc3RhdHNDdW0ucGFzc2luZ19jb21wIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgLSAuMykgKiA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IChzdGF0c0N1bS5wYXNzaW5nX3lkcyAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gMykgKiAuMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gKHN0YXRzQ3VtLnBhc3NpbmdfdGQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCkgKiAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAyLjM3NSAtIChzdGF0c0N1bS5wYXNzaW5nX2ludCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICogMjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA+IDIuMzc1KSBhID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhIDwgMCkgYSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiID4gMi4zNzUpIGIgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIgPCAwKSBiID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPiAyLjM3NSkgYyA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA8IDApIGMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA+IDIuMzc1KSBkID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIDwgMCkgZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXRpbmcgPSAoYStiK2MrZCkvNioxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZ3MucHVzaCh7XCJ3ZWVrXCI6aW5kZXggKyAxLCBcInJhdGluZ1wiOk1hdGgucm91bmQoKHJhdGluZyArIDAuMDAwMDEpICogMTAwKSAvIDEwMCxcInBpZFwiOnBsYXllci5pZH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGluZ09iaiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2gocmF0aW5ncywgZnVuY3Rpb24ocmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdPYmpbcmF0aW5nLndlZWtdID0gcmF0aW5nO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCA9PSAzICkge2NvbnNvbGUubG9nKHJhdGluZ09iaik7Y29uc29sZS5sb2cocmF0aW5ncyl9O1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2gocmF0aW5nT2JqLCBmdW5jdGlvbihyYXRpbmcsaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCA9PSAzKSBjb25zb2xlLmxvZyhyYXRpbmcsaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJhdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nID0gcmF0aW5nT2JqW2ktMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZy53ZWVrKytcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcud2VlayA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZy5yYXRpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcucGlkID0gcGxheWVyLmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy9mb3IgKHZhciBpID0gMTsgaSA8IDE5OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgaWYgKCFyYXRpbmdPYmpbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIGlmIChpICE9IDEgJiYgcmF0aW5nT2JqW2ktMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICByYXRpbmdPYmpbaV0gPSByYXRpbmdPYmpbaS0xXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICByYXRpbmdPYmpbaV0ud2VlayA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIHJhdGluZ09ialtpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByYXRpbmdPYmo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByYXRpbmdzID0gXy52YWx1ZXMoZ2V0UmF0aW5ncyhwbGF5ZXIpKTtcbiAgICAgICAgICAgICAgICAvL2lmICghcGxheWVyLmlkID09IDEpIHdlZWsgKz0gMztcbiAgICAgICAgICAgICAgICBwbGF5ZXIucmF0aW5ncyA9IF8udGFrZShyYXRpbmdzLCB3ZWVrKTtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmlkID09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmF0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBsYXllci5yYXRpbmdzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5wbGF5ZXJzLGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIHBsYXllci5jbGFzc05hbWUgPSAnamFtZWlzJztcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmlkICE9IDEpIHBsYXllci5jbGFzc05hbWUgPSAnb3RoZXInO1xuICAgICAgICAgICAgICAgIHBsYXllci5yYXRpbmdzLmZvckVhY2goZnVuY3Rpb24oZCxpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLndlZWsgPSArZC53ZWVrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZC5yYXRpbmcgPSBkLnJhdGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucGlkID0gcGxheWVyLmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgIT0gMCAmJiBwbGF5ZXIucmF0aW5nc1tpXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhdGluZ3NbaV0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwid2Vla1wiOnBsYXllci5yYXRpbmdzW2ldLndlZWsgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJhdGluZ1wiOnBsYXllci5yYXRpbmdzW2ldLnJhdGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJwaWRcIjpwbGF5ZXIuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRpbmdzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlZWtcIjogaSArIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicmF0aW5nXCI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGlkXCI6IHBsYXllci5pZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL18uZm9yRWFjaCgkc2NvcGUucGxheWVycyxmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKHBsYXllci5uYW1lLHBsYXllci5yYXRpbmdzLmxlbmd0aCk7XG4gICAgICAgICAgICAvL30pO1xuXG4gICAgICAgICAgICB2YXIgbWFyZ2luID0ge3RvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogNTB9O1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gOTYwIC0gbWFyZ2luLnJpZ2h0IC0gbWFyZ2luLmxlZnQ7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gNTAwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG4gICAgICAgICAgICB2YXIgeCA9IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFswLHdpZHRoXSk7XG4gICAgICAgICAgICB2YXIgeSA9IGQzLnNjYWxlLmxpbmVhcigpLnJhbmdlKFtoZWlnaHQsMF0pO1xuICAgICAgICAgICAgdmFyIHhBeGlzID0gZDMuc3ZnLmF4aXMoKS5zY2FsZSh4KS5vcmllbnQoXCJib3R0b21cIikudGlja1ZhbHVlcyhkMy5yYW5nZSgxLHdlZWsgKyAxKSkudGlja0Zvcm1hdChkMy5mb3JtYXQoXCJkXCIpKTtcbiAgICAgICAgICAgIHZhciB5QXhpcyA9IGQzLnN2Zy5heGlzKCkuc2NhbGUoeSkub3JpZW50KFwibGVmdFwiKTtcbiAgICAgICAgICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUoKVxuICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC53ZWVrKX0pXG4gICAgICAgICAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkLnJhdGluZyl9KVxuICAgICAgICAgICAgICAgIC5pbnRlcnBvbGF0ZSgnc3RlcC1hZnRlcicpO1xuICAgICAgICAgICAgdmFyIHN2ZyA9IGQzLnNlbGVjdChcIiNncmFwaFwiKS5zZWxlY3Rfb3JfYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuICAgICAgICAgICAgICAgIC5zZWxlY3Rfb3JfYXBwZW5kKFwiZy5jb250YWluZXJcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG4gICAgICAgICAgICB4LmRvbWFpbihbMSwgTnVtYmVyKHdlZWspXSk7XG4gICAgICAgICAgICB5LmRvbWFpbihbMCwxNTguM10pO1xuXG5cbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHN2Zy5zZWxlY3Rfb3JfYXBwZW5kKCdnLmxpbmVzJykuc2VsZWN0QWxsKCdwYXRoJylcbiAgICAgICAgICAgICAgICAuZGF0YSgkc2NvcGUucGxheWVycy5yZXZlcnNlKCksZnVuY3Rpb24oZCl7aWYoZCl7Lypjb25zb2xlLmxvZyhkKTsqL3JldHVybiBkLmlkO319KTtcblxuICAgICAgICAgICAgbGluZXMuZW50ZXIoKS5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2xhc3NOYW1lfSlcbiAgICAgICAgICAgIC5hdHRyKFwibmFtZVwiLGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWV9KVxuICAgICAgICAgICAgLmF0dHIoXCJkXCIsIGZ1bmN0aW9uKGQpIHtyZXR1cm4gbGluZShkLnJhdGluZ3MpfSk7XG5cbiAgICAgICAgICAgIGxpbmVzLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY2xhc3NOYW1lfSlcbiAgICAgICAgICAgIC5hdHRyKFwibmFtZVwiLGZ1bmN0aW9uKGQpe3JldHVybiBkLm5hbWV9KVxuICAgICAgICAgICAgLnRyYW5zaXRpb24oKS5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7cmV0dXJuIGxpbmUoZC5yYXRpbmdzKX0pO1xuXG4gICAgICAgICAgICBsaW5lcy5leGl0KCkucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIHN2Zy5zZWxlY3Rfb3JfYXBwZW5kKFwiZy54XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAuY2FsbCh4QXhpcyk7XG5cbiAgICAgICAgICAgIHN2Zy5zZWxlY3Rfb3JfYXBwZW5kKFwiZy55XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAgICAgICAgIC5jYWxsKHlBeGlzKVxuICAgICAgICAgICAgICAgIC5zZWxlY3Rfb3JfYXBwZW5kKFwidGV4dC55YXhpc1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXCJyb3RhdGUoLTkwKVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLDYpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi43MWVtXCIpXG4gICAgICAgICAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIixcImVuZFwiKVxuICAgICAgICAgICAgICAgIC50ZXh0KFwiUUIgUmF0aW5nIChjdW11bGF0aXZlKVwiKTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuY2hhcnRBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLmRsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZG9jdHlwZSA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgc3RhbmRhbG9uZT1cIm5vXCI/PjwhRE9DVFlQRSBzdmcgUFVCTElDIFwiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU5cIiBcImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZFwiPic7XG5cbiAgICAgICAgICAgIHdpbmRvdy5VUkwgPSAod2luZG93LlVSTCB8fCB3aW5kb3cud2Via2l0VVJMKTtcblxuICAgICAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5LFxuICAgICAgICAgICAgICAgIGVtcHR5U3ZnO1xuXG4gICAgICAgICAgICB2YXIgcHJlZml4ID0ge1xuICAgICAgICAgICAgICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCIsXG4gICAgICAgICAgICAgICAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICAgICAgICAgICAgICAgIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpbml0aWFsaXplKCk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemUoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRvY3VtZW50cyA9IFt3aW5kb3cuZG9jdW1lbnRdLFxuICAgICAgICAgICAgICAgICAgICBTVkdTb3VyY2VzID0gW107XG4gICAgICAgICAgICAgICAgaWZyYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpZnJhbWVcIiksXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwib2JqZWN0XCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gYWRkIGVtcHR5IHN2ZyBlbGVtZW50XG4gICAgICAgICAgICAgICAgdmFyIGVtcHR5U3ZnID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhwcmVmaXguc3ZnLCAnc3ZnJyk7XG4gICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZW1wdHlTdmcpO1xuICAgICAgICAgICAgICAgIHZhciBlbXB0eVN2Z0RlY2xhcmF0aW9uQ29tcHV0ZWQgPSBnZXRDb21wdXRlZFN0eWxlKGVtcHR5U3ZnKTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChpZnJhbWVzLCBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNvbnRlbnREb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKGVsLmNvbnRlbnREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwob2JqZWN0cywgZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5jb250ZW50RG9jdW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHMucHVzaChlbC5jb250ZW50RG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudHMuZm9yRWFjaChmdW5jdGlvbihkb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NvdXJjZXMgPSBnZXRTb3VyY2VzKGRvYywgZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBwcm90b3R5cGUgb24gTllUIHBhZ2VzXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmV3U291cmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgU1ZHU291cmNlcy5wdXNoKG5ld1NvdXJjZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKFNWR1NvdXJjZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVQb3BvdmVyKFNWR1NvdXJjZXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoU1ZHU291cmNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvd25sb2FkKFNWR1NvdXJjZXNbMF0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlIENyb3diYXIgY291bGRu4oCZdCBmaW5kIGFueSBTVkcgbm9kZXMuXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjcmVhdGVQb3BvdmVyKHNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICBjbGVhbnVwKCk7XG5cbiAgICAgICAgICAgICAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oczEpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHMyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoczEgIT09IHMyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChNYXRoLmFicyhzMS50b3AgLSBzMi50b3ApIDwgMzgpICYmIChNYXRoLmFicyhzMS5sZWZ0IC0gczIubGVmdCkgPCAzOCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgczIudG9wICs9IDM4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMi5sZWZ0ICs9IDM4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYnV0dG9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgYm9keS5hcHBlbmRDaGlsZChidXR0b25zQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzdmctY3Jvd2JhclwiKTtcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLnN0eWxlW1wiei1pbmRleFwiXSA9IDFlNztcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLnN0eWxlW1wicG9zaXRpb25cIl0gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5zdHlsZVtcInRvcFwiXSA9IDA7XG4gICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5zdHlsZVtcImxlZnRcIl0gPSAwO1xuXG5cblxuICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGJhY2tncm91bmQpO1xuXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInN2Zy1jcm93YmFyXCIpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQuc3R5bGVbXCJiYWNrZ3JvdW5kXCJdID0gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNylcIjtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLnN0eWxlW1wicG9zaXRpb25cIl0gPSBcImZpeGVkXCI7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zdHlsZVtcImxlZnRcIl0gPSAwO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQuc3R5bGVbXCJ0b3BcIl0gPSAwO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQuc3R5bGVbXCJ3aWR0aFwiXSA9IFwiMTAwJVwiO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQuc3R5bGVbXCJoZWlnaHRcIl0gPSBcIjEwMCVcIjtcblxuICAgICAgICAgICAgICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidXR0b25XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b25XcmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInN2Zy1jcm93YmFyXCIpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wicG9zaXRpb25cIl0gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJ0b3BcIl0gPSAoZC50b3AgKyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJsZWZ0XCJdID0gKGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGQubGVmdCkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJwYWRkaW5nXCJdID0gXCI0cHhcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImJvcmRlci1yYWRpdXNcIl0gPSBcIjNweFwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wiY29sb3JcIl0gPSBcIndoaXRlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJ0ZXh0LWFsaWduXCJdID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImZvbnQtZmFtaWx5XCJdID0gXCInSGVsdmV0aWNhIE5ldWUnXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJiYWNrZ3JvdW5kXCJdID0gXCJyZ2JhKDAsIDAsIDAsIDAuOClcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImJveC1zaGFkb3dcIl0gPSBcIjBweCA0cHggMThweCByZ2JhKDAsIDAsIDAsIDAuNClcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImN1cnNvclwiXSA9IFwibW92ZVwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnRleHRDb250ZW50ID0gIFwiU1ZHICNcIiArIGkgKyBcIjogXCIgKyAoZC5pZCA/IFwiI1wiICsgZC5pZCA6IFwiXCIpICsgKGQuY2xhc3MgPyBcIi5cIiArIGQuY2xhc3MgOiBcIlwiKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwiZGF0YS1zb3VyY2UtaWRcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZVtcIndpZHRoXCJdID0gXCIxNTBweFwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc3R5bGVbXCJmb250LXNpemVcIl0gPSBcIjEycHhcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlW1wibGluZS1oZWlnaHRcIl0gPSBcIjEuNGVtXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZVtcIm1hcmdpblwiXSA9IFwiNXB4IDAgMCAwXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRG93bmxvYWRcIjtcblxuICAgICAgICAgICAgICAgICAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlbCwgZCwgaSwgc291cmNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkKGQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Jvd2JhckVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdmctY3Jvd2JhclwiKTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChjcm93YmFyRWxlbWVudHMsIGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFNvdXJjZXMoZG9jLCBlbXB0eVN2Z0RlY2xhcmF0aW9uQ29tcHV0ZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ZnSW5mbyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBzdmdzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzdmdcIik7XG5cbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoc3ZncywgZnVuY3Rpb24gKHN2Zykge1xuXG4gICAgICAgICAgICAgICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2ZXJzaW9uXCIsIFwiMS4xXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIGF0dHJpYnV0ZXMgc28gdGhleSBhcmVuJ3QgZG91YmxlZCB1cFxuICAgICAgICAgICAgICAgICAgICBzdmcucmVtb3ZlQXR0cmlidXRlKFwieG1sbnNcIik7XG4gICAgICAgICAgICAgICAgICAgIHN2Zy5yZW1vdmVBdHRyaWJ1dGUoXCJ4bGlua1wiKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUaGVzZSBhcmUgbmVlZGVkIGZvciB0aGUgc3ZnXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3ZnLmhhc0F0dHJpYnV0ZU5TKHByZWZpeC54bWxucywgXCJ4bWxuc1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZU5TKHByZWZpeC54bWxucywgXCJ4bWxuc1wiLCBwcmVmaXguc3ZnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3ZnLmhhc0F0dHJpYnV0ZU5TKHByZWZpeC54bWxucywgXCJ4bWxuczp4bGlua1wiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZU5TKHByZWZpeC54bWxucywgXCJ4bWxuczp4bGlua1wiLCBwcmVmaXgueGxpbmspO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0SW5saW5lU3R5bGVzKHN2ZywgZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gKG5ldyBYTUxTZXJpYWxpemVyKCkpLnNlcmlhbGl6ZVRvU3RyaW5nKHN2Zyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWN0ID0gc3ZnLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICAgICAgICAgICAgICBzdmdJbmZvLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiByZWN0LnRvcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IHJlY3QubGVmdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBzdmcuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc3ZnLmdldEF0dHJpYnV0ZShcImlkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRFbGVtZW50Q291bnQ6IHN2Zy5jaGlsZEVsZW1lbnRDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogW2RvY3R5cGUgKyBzb3VyY2VdXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdmdJbmZvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBkb3dubG9hZChzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZW5hbWUgPSBcInVudGl0bGVkXCI7XG5cbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmlkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gc291cmNlLmlkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc291cmNlLmNsYXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gc291cmNlLmNsYXNzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93LmRvY3VtZW50LnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVuYW1lID0gd2luZG93LmRvY3VtZW50LnRpdGxlLnJlcGxhY2UoL1teYS16MC05XS9naSwgJy0nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihzb3VyY2Uuc291cmNlLCB7IFwidHlwZVwiIDogXCJ0ZXh0XFwveG1sXCIgfSkpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJzdmctY3Jvd2JhclwiKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZShcImRvd25sb2FkXCIsIGZpbGVuYW1lICsgXCIuc3ZnXCIpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB1cmwpO1xuICAgICAgICAgICAgICAgIGEuc3R5bGVbXCJkaXNwbGF5XCJdID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgYS5jbGljaygpO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgICAgICAgICB9LCAxMCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gc2V0SW5saW5lU3R5bGVzKHN2ZywgZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkKSB7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBleHBsaWNpdGx5U2V0U3R5bGUgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNTU1N0eWxlRGVjbGFyYXRpb25Db21wdXRlZCA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpLCBsZW4sIGtleSwgdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlU3RyID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpPTAsIGxlbj1jU1NTdHlsZURlY2xhcmF0aW9uQ29tcHV0ZWQubGVuZ3RoOyBpPGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9Y1NTU3R5bGVEZWNsYXJhdGlvbkNvbXB1dGVkW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9Y1NTU3R5bGVEZWNsYXJhdGlvbkNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSE9PWVtcHR5U3ZnRGVjbGFyYXRpb25Db21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wdXRlZFN0eWxlU3RyKz1rZXkrXCI6XCIrdmFsdWUrXCI7XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29tcHV0ZWRTdHlsZVN0cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYXZlcnNlKG9iail7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmVlID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRyZWUucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICB2aXNpdChvYmopO1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiB2aXNpdChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5vZGVUeXBlID09PSAxICYmIGNoaWxkLm5vZGVOYW1lICE9ICdTQ1JJUFQnKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUucHVzaChjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdChjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGhhcmRjb2RlIGNvbXB1dGVkIGNzcyBzdHlsZXMgaW5zaWRlIHN2Z1xuICAgICAgICAgICAgICAgIHZhciBhbGxFbGVtZW50cyA9IHRyYXZlcnNlKHN2Zyk7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBhbGxFbGVtZW50cy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGktLSl7XG4gICAgICAgICAgICAgICAgICAgIGV4cGxpY2l0bHlTZXRTdHlsZShhbGxFbGVtZW50c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG5cblxuXG5cblxuXG5cbiIsImFuZ3VsYXIubW9kdWxlKCd3aW5zdG9uJylcbiAgICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCBzZWFyY2hTdmMpe1xuICAgICAgICAvLyBUaGVzZSBzdGF0ZXMgY29ycmVzcG9uZCB0byB0aGUgcGFnZXMgb24gdGhlIGFwcC4gSG9va3MgdXAgdGVtcGxhdGVzIGFuZCB2aWV3c1xuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScse1xuICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3VwZGF0ZVN0YXRzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ21haW5DVFJMJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBwcmVsb2FkT2JqOiBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAoe21ldGhvZDonR0VUJyx1cmw6Jy9hcGkvc3RhdHMnfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAgICAgLy8uc3RhdGUoJ3NlYXJjaCcse1xuICAgICAgICAgICAgLy8gICAgdXJsOiAnL3NlYXJjaCcsXG4gICAgICAgICAgICAvLyAgICB0ZW1wbGF0ZVVybDogJ3NlYXJjaC5odG1sJyxcbiAgICAgICAgICAgIC8vICAgIGNvbnRyb2xsZXI6ICdzZWFyY2hDVFJMJyxcbiAgICAgICAgICAgIC8vICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgIC8vICAgICAgICAvLyBUaGlzIHF1ZXJpZXMgdGhlIHNlcnZlciBmb3IgZGlzdGluY3QgZGVwYXJ0bWVudHMgYW5kIHByZWxvYWRzIHRoZSBkZXBhcnRtZW50cyBkcm9wIGRvd25cbiAgICAgICAgICAgIC8vICAgICAgICBwcmVsb2FkT0JKOiBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICByZXR1cm4gJGh0dHAoe21ldGhvZDonR0VUJyx1cmw6Jy9hcGkvZGVwYXJ0bWVudHMnfSk7XG4gICAgICAgICAgICAvLyAgICAgICAgfVxuICAgICAgICAgICAgLy8gICAgfVxuICAgICAgICAgICAgLy99KVxuICAgICAgICAgICAgLy8uc3RhdGUoJ2RldGFpbHMnLHtcbiAgICAgICAgICAgIC8vICAgIC8vIFRoZSA6aWQgaXMgdGhlIHN0cmluZyBwYXNzZWQgaW4gZnJvbSB0aGUgVVJMIGNvcnJlc3BvbmRzIHRvIHRoZSBwZXJzb25JRCBpbiB0aGUgdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAvLyAgICB1cmw6ICcvZGV0YWlscy86aWQnLFxuICAgICAgICAgICAgLy8gICAgdGVtcGxhdGVVcmw6ICdkZXRhaWxzLmh0bWwnLFxuICAgICAgICAgICAgLy8gICAgY29udHJvbGxlcjogJ2RldGFpbENUUkwnXG4gICAgICAgICAgICAvL30pXG4gICAgfV0pXG4gICAgLnJ1bihbJyRzdGF0ZScsZnVuY3Rpb24oJHN0YXRlKXtcbiAgICAgICAgLy8gRXZlcnl0aGluZyBpbnNpZGUgaGVyZSB3aWxsIGJlIHJ1biBvbmUgdGltZSBvbmNlIHRoZSBhcHAgaGFzIGxvYWRlZC4gR29vZCBwbGFjZSB0byBpbml0aWFsaXplIGFueXRoaW5nIHlvdSB3aWxsIGJlIHVzaW5nXG4gICAgICAgICRzdGF0ZS5nbygnaG9tZScpO1xuICAgIH1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==