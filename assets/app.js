angular.module("winston",["ui.router"]),angular.module("winston").service("apiSVC",["$http",function(t){this.addNew=function(a){return t.post("/api/stats/add",a)},this.remove=function(){return t.get("/api/stats/remove")},this.load=function(){return t.get("/api/stats")}}]),angular.module("winston").controller("mainCTRL",["$scope","apiSVC","preloadObj",function(t,a,s){function e(a){_.forEach(t.players,function(s){function e(t){var a,s=[];_.forEach(t.games,function(e,n){if(!a&&1==e.g&&e.passing_att){if(a={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0},null!=e.passing_comp&&(a.passing_comp+=e.passing_comp),null!=e.passing_yds&&(a.passing_yds+=e.passing_yds),null!=e.passing_td&&(a.passing_td+=e.passing_td),null!=e.passing_att&&(a.passing_att+=e.passing_att),null!=e.passing_int&&(a.passing_int+=e.passing_int),null!=a.passing_att&&0!=a.passing_att){var l=5*(a.passing_comp/a.passing_att-.3),i=.25*(a.passing_yds/a.passing_att-3),r=a.passing_td/a.passing_att*20,o=2.375-a.passing_int/a.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),o>2.375&&(o=2.375),0>o&&(o=0);var u=(l+i+r+o)/6*100;s.push({week:n+1,rating:Math.round(100*(u+1e-5))/100,pid:t.id})}}else if(a||e.g)if(a||1!=e.g||e.passing_att){if(null!=e.passing_comp&&(a.passing_comp+=e.passing_comp),null!=e.passing_yds&&(a.passing_yds+=e.passing_yds),null!=e.passing_td&&(a.passing_td+=e.passing_td),null!=e.passing_att&&(a.passing_att+=e.passing_att),null!=e.passing_int&&(a.passing_int+=e.passing_int),null!=a.passing_att&&0!=a.passing_att){var l=5*(a.passing_comp/a.passing_att-.3),i=.25*(a.passing_yds/a.passing_att-3),r=a.passing_td/a.passing_att*20,o=2.375-a.passing_int/a.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),o>2.375&&(o=2.375),0>o&&(o=0);var u=(l+i+r+o)/6*100;s.push({week:n+1,rating:Math.round(100*(u+1e-5))/100,pid:t.id})}}else{var p=s[s.length-1],c={week:p.week+1,rating:p.rating,pid:t.id};s.push(c)}else s.push({week:n+1,rating:null,pid:t.id})});var e={};return _.forEach(s,function(t){e[t.week]=t}),_.forEach(e,function(a,s){a||(0!=s?(a=e[s-1],a.week++):(a.week=1,a.rating=null,a.pid=t.id))}),e}s.games=[],_.forEach(t.games,function(t){t.player==s.id&&s.games.push(t)}),_.sortBy(s.games,function(t){return t.week});var n=_.values(e(s));s.ratings=_.take(n,a)}),_.forEach(t.players,function(t){t.className="jameis",1!=t.id&&(t.className="other"),t.ratings.forEach(function(a,s){a?(a.week=+a.week,a.rating=a.rating,a.pid=t.id):0!=s&&null!=t.ratings[s]?t.ratings[s]={week:t.ratings[s].week+1,rating:t.ratings[s].rating,pid:t.id}:t.ratings[s]={week:s+1,rating:null,pid:t.id}})});var s={top:20,right:20,bottom:30,left:50},e=960-s.right-s.left,n=500-s.top-s.bottom,l=d3.scale.linear().range([0,e]),i=d3.scale.linear().range([n,0]),r=d3.svg.axis().scale(l).orient("bottom").tickValues(d3.range(1,a+1)).tickFormat(d3.format("d")),o=d3.svg.axis().scale(i).orient("left"),u=d3.svg.line().x(function(t){return l(t.week)}).y(function(t){return i(t.rating)}).interpolate("basis"),p=d3.select("#graph").select_or_append("svg").attr("width",e+s.left+s.right).attr("height",n+s.top+s.bottom).select_or_append("g.container").attr("transform","translate("+s.left+","+s.top+")");l.domain([1,Number(a)]),i.domain([0,160]);var c=p.select_or_append("g.lines").selectAll("path").data(t.players.reverse(),function(t){return t?t.id:void 0});c.enter().append("path").attr("class",function(t){return t.className}).attr("name",function(t){return t.name}).attr("d",function(t){return u(t.ratings)}),c.attr("class",function(t){return t.className}).attr("name",function(t){return t.name}).transition().attr("d",function(t){return u(t.ratings)}),c.exit().remove(),p.select_or_append("g.x").attr("class","x axis").attr("transform","translate(0,"+n+")").call(r).select_or_append("text.xaxis").attr("y",25).attr("x",450).style("text-anchor","end").style("dy",".71em").text("Week"),p.select_or_append("g.y").attr("class","y axis").call(o).select_or_append("text.yaxis").attr("transform","rotate(-90)").attr("y",-50).attr("x",-150).attr("dy",".71em").style("text-anchor","end").text("QB Rating (cumulative)")}t._showInput=!1;var n=function(){return[{key:"week",val:null},{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]},l=function(){return[{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]};"err"==s.data.status&&console.log(s.data.message),t.gameStats=s.data.data.winston,t.stats=new n,t.Ustats=new l,t.newStats=function(){a.addNew(t.Ustats).success(function(s){"success"==s.status?(t.Ustats=new l,t.toggleInput(),a.load().success(function(a){t.gameStats=a.data.winston})):"game_pk"==s.message.constraint?alert("Error: That game already exists in the database. Delete it first if you want to update it"):alert("Error: "+JSON.stringify(s.message.detail))})},t.toggleInput=function(){t._showInput=!t._showInput},t.deleteRow=function(){0!=t.gameStats&&a.remove().success(function(s){"success"==s.status&&a.load().success(function(a){t.gameStats=a.data.winston})})},t.maxGames=function(){var a=0;_.forEach(t.players,function(t){t.games.length>a&&(a=t.games.length)});for(var s=[],e=1;a+1>e;e++)s.push(e);return s},t.players=s.data.data.players,t.games=s.data.data.games,_.forEach(t.players,function(a){a.games=[],_.forEach(t.games,function(t){t.player===a.id&&a.games.push(t)})});var i=function(t,a){function s(t){if(null!=t.passing_att&&0!=t.passing_att){var a=5*(n.passing_comp/n.passing_att-.3),s=.25*(n.passing_yds/n.passing_att-3),e=n.passing_td/n.passing_att*20,l=2.375-n.passing_int/n.passing_att*25;return a>2.375&&(a=2.375),0>a&&(a=0),s>2.375&&(s=2.375),0>s&&(s=0),e>2.375&&(e=2.375),0>e&&(e=0),l>2.375&&(l=2.375),0>l&&(l=0),(a+s+e+l)/6*100}}var e=_.take(t.games,a),n={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0};return _.forEach(e,function(t){null!=t.passing_comp&&(n.passing_comp+=t.passing_comp),null!=t.passing_yds&&(n.passing_yds+=t.passing_yds),null!=t.passing_td&&(n.passing_td+=t.passing_td),null!=t.passing_att&&(n.passing_att+=t.passing_att),null!=t.passing_int&&(n.passing_int+=t.passing_int)}),t.rating=s(n),t};t.ratePlayers=function(){t.chartActive=!0;var s=$("#week2rate").val().split(" ")[1],n=[];t.rated=[],a.load().success(function(a){t.players=a.data.players,t.games=a.data.games,t.gameStates=a.data.winston,_.forEach(t.players,function(a){a.games=[],_.forEach(t.games,function(t){t.player===a.id&&a.games.push(t)}),_.sortBy(a.games,function(t){return t.week})}),_.forEach(t.players,function(t){i(t,s),n.push({player:t.name,rating:Math.round(100*(t.rating+1e-5))/100,id:"p"+t.id})});var l=_.sortBy(n,function(t){return t.rating});l=_.filter(l,function(t){return t.rating}),_.forEach(l.reverse(),function(a,s){a.rank=s+1,t.rated.push(a)}),e(s)})},t.chartActive=!1,t.dl=function(){function t(){var t=[window.document],s=[];iframes=document.querySelectorAll("iframe"),objects=document.querySelectorAll("object");var l=window.document.createElementNS(o.svg,"svg");window.document.body.appendChild(l);var i=getComputedStyle(l);[].forEach.call(iframes,function(a){try{a.contentDocument&&t.push(a.contentDocument)}catch(s){console.log(s)}}),[].forEach.call(objects,function(a){try{a.contentDocument&&t.push(a.contentDocument)}catch(s){console.log(s)}}),t.forEach(function(t){for(var a=e(t,i),n=0;n<a.length;n++)s.push(a[n])}),s.length>1?a(s):s.length>0?n(s[0]):alert("The Crowbar couldnâ€™t find any SVG nodes.")}function a(t){s(),t.forEach(function(a){t.forEach(function(t){a!==t&&Math.abs(a.top-t.top)<38&&Math.abs(a.left-t.left)<38&&(t.top+=38,t.left+=38)})});var a=document.createElement("div");r.appendChild(a),a.setAttribute("class","svg-crowbar"),a.style["z-index"]=1e7,a.style.position="absolute",a.style.top=0,a.style.left=0;var e=document.createElement("div");r.appendChild(e),e.setAttribute("class","svg-crowbar"),e.style.background="rgba(255, 255, 255, 0.7)",e.style.position="fixed",e.style.left=0,e.style.top=0,e.style.width="100%",e.style.height="100%",t.forEach(function(t,s){var e=document.createElement("div");a.appendChild(e),e.setAttribute("class","svg-crowbar"),e.style.position="absolute",e.style.top=t.top+document.body.scrollTop+"px",e.style.left=document.body.scrollLeft+t.left+"px",e.style.padding="4px",e.style["border-radius"]="3px",e.style.color="white",e.style["text-align"]="center",e.style["font-family"]="'Helvetica Neue'",e.style.background="rgba(0, 0, 0, 0.8)",e.style["box-shadow"]="0px 4px 18px rgba(0, 0, 0, 0.4)",e.style.cursor="move",e.textContent="SVG #"+s+": "+(t.id?"#"+t.id:"")+(t["class"]?"."+t["class"]:"");var l=document.createElement("button");e.appendChild(l),l.setAttribute("data-source-id",s),l.style.width="150px",l.style["font-size"]="12px",l.style["line-height"]="1.4em",l.style.margin="5px 0 0 0",l.textContent="Download",l.onclick=function(a){n(t)}})}function s(){var t=document.querySelectorAll(".svg-crowbar");[].forEach.call(t,function(t){t.parentNode.removeChild(t)})}function e(t,a){var s=[],e=t.querySelectorAll("svg");return[].forEach.call(e,function(t){t.setAttribute("version","1.1"),t.removeAttribute("xmlns"),t.removeAttribute("xlink"),t.hasAttributeNS(o.xmlns,"xmlns")||t.setAttributeNS(o.xmlns,"xmlns",o.svg),t.hasAttributeNS(o.xmlns,"xmlns:xlink")||t.setAttributeNS(o.xmlns,"xmlns:xlink",o.xlink),l(t,a);var e=(new XMLSerializer).serializeToString(t),n=t.getBoundingClientRect();s.push({top:n.top,left:n.left,width:n.width,height:n.height,"class":t.getAttribute("class"),id:t.getAttribute("id"),childElementCount:t.childElementCount,source:[i+e]})}),s}function n(t){var a="untitled";t.id?a=t.id:t["class"]?a=t["class"]:window.document.title&&(a=window.document.title.replace(/[^a-z0-9]/gi,"-").toLowerCase());var s=window.URL.createObjectURL(new Blob(t.source,{type:"text/xml"})),e=document.createElement("a");r.appendChild(e),e.setAttribute("class","svg-crowbar"),e.setAttribute("download",a+".svg"),e.setAttribute("href",s),e.style.display="none",e.click(),setTimeout(function(){window.URL.revokeObjectURL(s)},10)}function l(t,a){function s(t){var s,e,n,l,i=getComputedStyle(t),r="";for(s=0,e=i.length;e>s;s++)n=i[s],l=i.getPropertyValue(n),l!==a.getPropertyValue(n)&&(r+=n+":"+l+";");t.setAttribute("style",r)}function e(t){function a(t){if(t&&t.hasChildNodes())for(var e=t.firstChild;e;)1===e.nodeType&&"SCRIPT"!=e.nodeName&&(s.push(e),a(e)),e=e.nextSibling}var s=[];return s.push(t),a(t),s}for(var n=e(t),l=n.length;l--;)s(n[l])}var i='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">';window.URL=window.URL||window.webkitURL;var r=document.body,o={xmlns:"http://www.w3.org/2000/xmlns/",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};t()}}]),angular.module("winston").config(["$stateProvider",function(t,a){t.state("home",{url:"/",templateUrl:"updateStats.html",controller:"mainCTRL",resolve:{preloadObj:["$http",function(t){return t({method:"GET",url:"/api/stats"})}]}})}]).run(["$state",function(t){t.go("home")}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwaVNWQy5qcyIsIm1haW5DVExSTC5qcyIsInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImFkZE5ldyIsIml0ZW0iLCJwb3N0IiwicmVtb3ZlIiwiZ2V0IiwibG9hZCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJhcGlTVkMiLCJwcmVsb2FkT2JqIiwiZHJhd0dyYXBoaWNzIiwid2VlayIsIl8iLCJmb3JFYWNoIiwicGxheWVycyIsInBsYXllciIsImdldFJhdGluZ3MiLCJzdGF0c0N1bSIsInJhdGluZ3MiLCJnYW1lcyIsImdhbWUiLCJpbmRleCIsImciLCJwYXNzaW5nX2F0dCIsInBhc3NpbmdfY29tcCIsInBhc3NpbmdfeWRzIiwicGFzc2luZ190ZCIsInBhc3NpbmdfaW50IiwiYSIsImIiLCJjIiwiZCIsInJhdGluZyIsInB1c2giLCJNYXRoIiwicm91bmQiLCJwaWQiLCJpZCIsIngiLCJsZW5ndGgiLCJ5IiwicmF0aW5nT2JqIiwiaSIsInNvcnRCeSIsInZhbHVlcyIsInRha2UiLCJjbGFzc05hbWUiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsImhlaWdodCIsImQzIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsInhBeGlzIiwic3ZnIiwiYXhpcyIsIm9yaWVudCIsInRpY2tWYWx1ZXMiLCJ0aWNrRm9ybWF0IiwiZm9ybWF0IiwieUF4aXMiLCJsaW5lIiwiaW50ZXJwb2xhdGUiLCJzZWxlY3QiLCJzZWxlY3Rfb3JfYXBwZW5kIiwiYXR0ciIsImRvbWFpbiIsIk51bWJlciIsImxpbmVzIiwic2VsZWN0QWxsIiwiZGF0YSIsInJldmVyc2UiLCJlbnRlciIsImFwcGVuZCIsIm5hbWUiLCJ0cmFuc2l0aW9uIiwiZXhpdCIsImNhbGwiLCJzdHlsZSIsInRleHQiLCJfc2hvd0lucHV0Iiwic3RhdHMiLCJrZXkiLCJ2YWwiLCJVc3RhdHMiLCJzdGF0dXMiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZSIsImdhbWVTdGF0cyIsIndpbnN0b24iLCJuZXdTdGF0cyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0b2dnbGVJbnB1dCIsImNvbnN0cmFpbnQiLCJhbGVydCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXRhaWwiLCJkZWxldGVSb3ciLCJyZXNwb25zZSIsIm1heEdhbWVzIiwibWF4Iiwid2Vla3MiLCJhY2N1bXVsYXRlU3RhdHMiLCJyYXRlIiwicmF0ZVBsYXllcnMiLCJjaGFydEFjdGl2ZSIsIiQiLCJzcGxpdCIsInJhdGVkIiwicGxheWVyc09iaiIsImdhbWVTdGF0ZXMiLCJyYW5rZWQiLCJmaWx0ZXIiLCJwIiwicmFuayIsImRsIiwiaW5pdGlhbGl6ZSIsImRvY3VtZW50cyIsIndpbmRvdyIsImRvY3VtZW50IiwiU1ZHU291cmNlcyIsImlmcmFtZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwib2JqZWN0cyIsImVtcHR5U3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwicHJlZml4IiwiYm9keSIsImFwcGVuZENoaWxkIiwiZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImVsIiwiY29udGVudERvY3VtZW50IiwiZXJyIiwiZG9jIiwibmV3U291cmNlcyIsImdldFNvdXJjZXMiLCJjcmVhdGVQb3BvdmVyIiwiZG93bmxvYWQiLCJzb3VyY2VzIiwiY2xlYW51cCIsInMxIiwiczIiLCJhYnMiLCJidXR0b25zQ29udGFpbmVyIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJhY2tncm91bmQiLCJidXR0b25XcmFwcGVyIiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsInRleHRDb250ZW50IiwiYnV0dG9uIiwib25jbGljayIsImNyb3diYXJFbGVtZW50cyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInN2Z0luZm8iLCJzdmdzIiwicmVtb3ZlQXR0cmlidXRlIiwiaGFzQXR0cmlidXRlTlMiLCJ4bWxucyIsInNldEF0dHJpYnV0ZU5TIiwieGxpbmsiLCJzZXRJbmxpbmVTdHlsZXMiLCJzb3VyY2UiLCJYTUxTZXJpYWxpemVyIiwic2VyaWFsaXplVG9TdHJpbmciLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xhc3MiLCJnZXRBdHRyaWJ1dGUiLCJjaGlsZEVsZW1lbnRDb3VudCIsImRvY3R5cGUiLCJmaWxlbmFtZSIsInRpdGxlIiwicmVwbGFjZSIsInRvTG93ZXJDYXNlIiwidXJsIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiQmxvYiIsInR5cGUiLCJjbGljayIsInNldFRpbWVvdXQiLCJyZXZva2VPYmplY3RVUkwiLCJleHBsaWNpdGx5U2V0U3R5bGUiLCJlbGVtZW50IiwibGVuIiwidmFsdWUiLCJjU1NTdHlsZURlY2xhcmF0aW9uQ29tcHV0ZWQiLCJjb21wdXRlZFN0eWxlU3RyIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInRyYXZlcnNlIiwib2JqIiwidmlzaXQiLCJub2RlIiwiaGFzQ2hpbGROb2RlcyIsImNoaWxkIiwiZmlyc3RDaGlsZCIsIm5vZGVUeXBlIiwibm9kZU5hbWUiLCJ0cmVlIiwibmV4dFNpYmxpbmciLCJhbGxFbGVtZW50cyIsIndlYmtpdFVSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwic2VhcmNoU3ZjIiwic3RhdGUiLCJ0ZW1wbGF0ZVVybCIsInJlc29sdmUiLCJtZXRob2QiLCJydW4iLCIkc3RhdGUiLCJnbyJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQUFDLE9BQUEsV0FBQSxjQ0RBRCxRQUFBQyxPQUFBLFdBQ0FDLFFBQUEsVUFBQSxRQUFBLFNBQUFDLEdBQ0FDLEtBQUFDLE9BQUEsU0FBQUMsR0FDQSxNQUFBSCxHQUFBSSxLQUFBLGlCQUFBRCxJQUVBRixLQUFBSSxPQUFBLFdBQ0EsTUFBQUwsR0FBQU0sSUFBQSxzQkFFQUwsS0FBQU0sS0FBQSxXQUNBLE1BQUFQLEdBQUFNLElBQUEsa0JDVEFULFFBQUFDLE9BQUEsV0FDQVUsV0FBQSxZ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QUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxVQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxZQUNBQyxJQUFBLE9BR0FELElBQUEsWUFDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFVBQ0FDLElBQUEsT0FHQUQsSUFBQSxNQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxRQUlBQyxFQUFBLFdBQ0EsUUFFQUYsSUFBQSxPQUNBQyxJQUFBLE9BR0FELElBQUEsSUFDQUMsSUFBQSxPQUdBRCxJQUFBLEtBQ0FDLElBQUEsT0FHQUQsSUFBQSxZQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFVBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFlBQ0FDLElBQUEsT0FHQUQsSUFBQSxZQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsVUFDQUMsSUFBQSxPQUdBRCxJQUFBLE1BQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BSUEsUUFBQS9FLEVBQUFrRSxLQUFBZSxRQUFBQyxRQUFBQyxJQUFBbkYsRUFBQWtFLEtBQUFrQixTQUNBdEYsRUFBQXVGLFVBQUFyRixFQUFBa0UsS0FBQUEsS0FBQW9CLFFBQ0F4RixFQUFBK0UsTUFBQSxHQUFBQSxHQUNBL0UsRUFBQWtGLE9BQUEsR0FBQUEsR0FDQWxGLEVBQUF5RixTQUFBLFdB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QUEseUlBRUF2RCxRQUFBNkQsSUFBQTdELE9BQUE2RCxLQUFBN0QsT0FBQXVGLFNBRUEsSUFBQTlFLEdBQUFSLFNBQUFRLEtBR0FELEdBQ0FtQyxNQUFBLGdDQUNBRSxNQUFBLCtCQUNBaEgsSUFBQSw2QkFHQWlFLFNDOWZBakksUUFBQUMsT0FBQSxXQUNBME4sUUFBQSxpQkFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxNQUFBLFFBQ0EvQixJQUFBLElBQ0FnQyxZQUFBLG1CQUNBcE4sV0FBQSxXQUNBcU4sU0FDQWxOLFlBQUEsUUFBQSxTQUFBWCxHQUNBLE1BQUFBLElBQUE4TixPQUFBLE1BQUFsQyxJQUFBLHVCQXNCQW1DLEtBQUEsU0FBQSxTQUFBQyxHQUVBQSxFQUFBQyxHQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgbmVlZHMgdG8gYmUgbG9hZGVkIGZpcnN0IGJlY2F1c2UgaXQgZGVmaW5lcyB0aGUgZGVwZW5kZW5jaWVzLiBUaGUgZ3VscCB0YXNrIHdpbGwgYWx3YXlzIGNvbmNhdCB0aGlzIHRvIHRoZSB0b3Agb2YgZmlsZVxuYW5ndWxhci5tb2R1bGUoJ3dpbnN0b24nLCBbJ3VpLnJvdXRlciddKTsiLCJhbmd1bGFyLm1vZHVsZSgnd2luc3RvbicpXG4uc2VydmljZSgnYXBpU1ZDJywgZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdGhpcy5hZGROZXcgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc3RhdHMvYWRkJyxpdGVtKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RhdHMvcmVtb3ZlJylcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0YXRzJylcbiAgICAgICAgfVxuICAgIH0pOyIsImFuZ3VsYXIubW9kdWxlKCd3aW5zdG9uJylcbiAgICAuY29udHJvbGxlcignbWFpbkNUUkwnLGZ1bmN0aW9uKCRzY29wZSxhcGlTVkMscHJlbG9hZE9iail7XG4gICAgICAgICRzY29wZS5fc2hvd0lucHV0ID0gZmFsc2U7XG4gICAgICAgIHZhciBzdGF0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3dlZWsnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2dzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfY29tcCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3BjdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfaW50JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3Nfc2NrJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3Nfc2NreScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3JhdGUnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF9hdHQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF95ZHMnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF9hdmcnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF90ZCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW0nLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZnVtX2xvc3QnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgVXN0YXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2dzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfY29tcCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3BjdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfaW50JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3Nfc2NrJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3Nfc2NreScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYXNzX3JhdGUnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF9hdHQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF95ZHMnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF9hdmcnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncnVzaF90ZCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW0nLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZnVtX2xvc3QnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICB9O1xuICAgICAgICBpZiAocHJlbG9hZE9iai5kYXRhLnN0YXR1cyA9PSAnZXJyJykgY29uc29sZS5sb2cocHJlbG9hZE9iai5kYXRhLm1lc3NhZ2UpO1xuICAgICAgICAkc2NvcGUuZ2FtZVN0YXRzID0gcHJlbG9hZE9iai5kYXRhLmRhdGEud2luc3RvbjtcbiAgICAgICAgJHNjb3BlLnN0YXRzID0gbmV3IHN0YXRzKCk7XG4gICAgICAgICRzY29wZS5Vc3RhdHMgPSBuZXcgVXN0YXRzKCk7XG4gICAgICAgICRzY29wZS5uZXdTdGF0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXBpU1ZDLmFkZE5ldygkc2NvcGUuVXN0YXRzKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLlVzdGF0cyA9IG5ldyBVc3RhdHMoKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnRvZ2dsZUlucHV0KCk7XG4gICAgICAgICAgICAgICAgICAgIGFwaVNWQy5sb2FkKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2FtZVN0YXRzID0gZGF0YS5kYXRhLndpbnN0b247XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQubWVzc2FnZS5jb25zdHJhaW50ID09ICdnYW1lX3BrJykge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVycm9yOiBUaGF0IGdhbWUgYWxyZWFkeSBleGlzdHMgaW4gdGhlIGRhdGFiYXNlLiBEZWxldGUgaXQgZmlyc3QgaWYgeW91IHdhbnQgdG8gdXBkYXRlIGl0XCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVycm9yOiBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdC5tZXNzYWdlLmRldGFpbCkpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZUlucHV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuX3Nob3dJbnB1dCA9ICEkc2NvcGUuX3Nob3dJbnB1dDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmRlbGV0ZVJvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKCRzY29wZS5nYW1lU3RhdHMgIT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBhcGlTVkMucmVtb3ZlKCkuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGlTVkMubG9hZCgpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5nYW1lU3RhdHMgPSBkYXRhLmRhdGEud2luc3RvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUubWF4R2FtZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBtYXggPSAwO1xuICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5wbGF5ZXJzLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmdhbWVzLmxlbmd0aCA+IG1heCkgbWF4ID0gcGxheWVyLmdhbWVzLmxlbmd0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIHdlZWtzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG1heCArIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIHdlZWtzLnB1c2goaSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3ZWVrcztcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnBsYXllcnMgPSBwcmVsb2FkT2JqLmRhdGEuZGF0YS5wbGF5ZXJzO1xuICAgICAgICAkc2NvcGUuZ2FtZXMgPSBwcmVsb2FkT2JqLmRhdGEuZGF0YS5nYW1lcztcbiAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5wbGF5ZXJzLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgIHBsYXllci5nYW1lcyA9IFtdO1xuICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5nYW1lcywgZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBsYXllciA9PT0gcGxheWVyLmlkKSBwbGF5ZXIuZ2FtZXMucHVzaChnYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGFjY3VtdWxhdGVTdGF0cyA9IGZ1bmN0aW9uKHBsYXllciwgd2Vlaykge1xuICAgICAgICAgICAgdmFyIGdhbWVzID0gXy50YWtlKHBsYXllci5nYW1lcywgd2Vlayk7XG4gICAgICAgICAgICB2YXIgc3RhdHNDdW0gPSB7XG4gICAgICAgICAgICAgICAgcGFzc2luZ19jb21wOjAsXG4gICAgICAgICAgICAgICAgcGFzc2luZ195ZHM6IDAsXG4gICAgICAgICAgICAgICAgcGFzc2luZ190ZDogMCxcbiAgICAgICAgICAgICAgICBwYXNzaW5nX2F0dDogMCxcbiAgICAgICAgICAgICAgICBwYXNzaW5nX2ludDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF8uZm9yRWFjaChnYW1lcyxmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19jb21wICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfY29tcCArPSBnYW1lLnBhc3NpbmdfY29tcDtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3lkcyAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX3lkcyArPSBnYW1lLnBhc3NpbmdfeWRzO1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfdGQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ190ZCArPSBnYW1lLnBhc3NpbmdfdGQ7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19hdHQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19hdHQgKz0gZ2FtZS5wYXNzaW5nX2F0dDtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2ludCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2ludCArPSBnYW1lLnBhc3NpbmdfaW50O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmdW5jdGlvbiByYXRlKHN0YXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRzLnBhc3NpbmdfYXR0ICE9IG51bGwgJiYgc3RhdHMucGFzc2luZ19hdHQgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBmb3JtdWxhIGZyb20gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFzc2VyX3JhdGluZ1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IChzdGF0c0N1bS5wYXNzaW5nX2NvbXAgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIC4zKSAqIDU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gKHN0YXRzQ3VtLnBhc3NpbmdfeWRzIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgLSAzKSAqIC4yNTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAoc3RhdHNDdW0ucGFzc2luZ190ZCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0KSAqIDIwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IDIuMzc1IC0gKHN0YXRzQ3VtLnBhc3NpbmdfaW50IC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgKiAyNSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhID4gMi4zNzUpIGEgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPCAwKSBhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIgPiAyLjM3NSkgYiA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYiA8IDApIGIgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA+IDIuMzc1KSBjID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjIDwgMCkgYyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkID4gMi4zNzUpIGQgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQgPCAwKSBkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChhICsgYiArIGMgKyBkKSAvIDYgKiAxMDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbGF5ZXIucmF0aW5nID0gcmF0ZShzdGF0c0N1bSk7XG4gICAgICAgICAgICByZXR1cm4gcGxheWVyO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUucmF0ZVBsYXllcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5jaGFydEFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgd2VlayA9ICQoJyN3ZWVrMnJhdGUnKS52YWwoKS5zcGxpdCgnICcpWzFdO1xuICAgICAgICAgICAgdmFyIHJhdGVkID0gW107XG4gICAgICAgICAgICAkc2NvcGUucmF0ZWQgPSBbXTtcbiAgICAgICAgICAgIGFwaVNWQy5sb2FkKCkuc3VjY2VzcyhmdW5jdGlvbihwbGF5ZXJzT2JqKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBsYXllcnMgPSBwbGF5ZXJzT2JqLmRhdGEucGxheWVycztcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2FtZXMgPSBwbGF5ZXJzT2JqLmRhdGEuZ2FtZXM7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdhbWVTdGF0ZXMgPSBwbGF5ZXJzT2JqLmRhdGEud2luc3RvbjtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5nYW1lcywgZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGxheWVyID09PSBwbGF5ZXIuaWQpIHBsYXllci5nYW1lcy5wdXNoKGdhbWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXy5zb3J0QnkocGxheWVyLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZS53ZWVrO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlU3RhdHMocGxheWVyLHdlZWspO1xuICAgICAgICAgICAgICAgICAgICByYXRlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGxheWVyXCI6cGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJhdGluZ1wiOk1hdGgucm91bmQoKHBsYXllci5yYXRpbmcgKyAwLjAwMDAxKSAqIDEwMCkgLyAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6XCJwXCIrcGxheWVyLmlkXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmtlZCA9IF8uc29ydEJ5KHJhdGVkLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5yYXRpbmc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmFua2VkID0gXy5maWx0ZXIocmFua2VkLCBmdW5jdGlvbihwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAucmF0aW5nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChyYW5rZWQucmV2ZXJzZSgpLGZ1bmN0aW9uKHBsYXllciwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhbmsgPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yYXRlZC5wdXNoKHBsYXllcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHJhd0dyYXBoaWNzKHdlZWspO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIGRyYXdHcmFwaGljcyh3ZWVrKSB7XG4gICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIHBsYXllci5nYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUuZ2FtZXMsIGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGxheWVyID09IHBsYXllci5pZCkgcGxheWVyLmdhbWVzLnB1c2goZ2FtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5zb3J0QnkocGxheWVyLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lLndlZWs7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UmF0aW5ncyhwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGluZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRzQ3VtO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2gocGxheWVyLmdhbWVzLGZ1bmN0aW9uKGdhbWUsaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RhdHNDdW0gJiYgZ2FtZS5nID09IDEgJiYgZ2FtZS5wYXNzaW5nX2F0dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzQ3VtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaW5nX2NvbXA6MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2luZ195ZHM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpbmdfdGQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpbmdfYXR0OiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaW5nX2ludDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19jb21wICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfY29tcCArPSBnYW1lLnBhc3NpbmdfY29tcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3lkcyAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX3lkcyArPSBnYW1lLnBhc3NpbmdfeWRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfdGQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ190ZCArPSBnYW1lLnBhc3NpbmdfdGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19hdHQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19hdHQgKz0gZ2FtZS5wYXNzaW5nX2F0dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2ludCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2ludCArPSBnYW1lLnBhc3NpbmdfaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0c0N1bS5wYXNzaW5nX2F0dCAhPSBudWxsICYmIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9ybXVsYSBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1Bhc3Nlcl9yYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAoc3RhdHNDdW0ucGFzc2luZ19jb21wIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgLSAuMykgKiA1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IChzdGF0c0N1bS5wYXNzaW5nX3lkcyAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gMykgKiAuMjU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gKHN0YXRzQ3VtLnBhc3NpbmdfdGQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCkgKiAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAyLjM3NSAtIChzdGF0c0N1bS5wYXNzaW5nX2ludCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICogMjUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA+IDIuMzc1KSBhID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhIDwgMCkgYSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiID4gMi4zNzUpIGIgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIgPCAwKSBiID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPiAyLjM3NSkgYyA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA8IDApIGMgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA+IDIuMzc1KSBkID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIDwgMCkgZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXRpbmcgPSAoYStiK2MrZCkvNioxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZ3MucHVzaCh7XCJ3ZWVrXCI6aW5kZXggKyAxLCBcInJhdGluZ1wiOk1hdGgucm91bmQoKHJhdGluZyArIDAuMDAwMDEpICogMTAwKSAvIDEwMCxcInBpZFwiOnBsYXllci5pZH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc3RhdHNDdW0gJiYgIWdhbWUuZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZ3MucHVzaCh7XCJ3ZWVrXCI6aW5kZXggKyAxLFwicmF0aW5nXCI6bnVsbCxcInBpZFwiOnBsYXllci5pZH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzdGF0c0N1bSAmJiBnYW1lLmcgPT0gMSAmJiAhZ2FtZS5wYXNzaW5nX2F0dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcmF0aW5nc1tyYXRpbmdzLmxlbmd0aCAtMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB7XCJ3ZWVrXCI6IHgud2VlayArIDEsXCJyYXRpbmdcIjogeC5yYXRpbmcsXCJwaWRcIjpwbGF5ZXIuaWR9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZ3MucHVzaCh5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfY29tcCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2NvbXAgKz0gZ2FtZS5wYXNzaW5nX2NvbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ195ZHMgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ195ZHMgKz0gZ2FtZS5wYXNzaW5nX3lkcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3RkICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfdGQgKz0gZ2FtZS5wYXNzaW5nX3RkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfYXR0ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICs9IGdhbWUucGFzc2luZ19hdHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19pbnQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19pbnQgKz0gZ2FtZS5wYXNzaW5nX2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHNDdW0ucGFzc2luZ19hdHQgIT0gbnVsbCAmJiBzdGF0c0N1bS5wYXNzaW5nX2F0dCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcm11bGEgZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXNzZXJfcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gKHN0YXRzQ3VtLnBhc3NpbmdfY29tcCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gLjMpICogNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAoc3RhdHNDdW0ucGFzc2luZ195ZHMgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIDMpICogLjI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IChzdGF0c0N1bS5wYXNzaW5nX3RkIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQpICogMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gMi4zNzUgLSAoc3RhdHNDdW0ucGFzc2luZ19pbnQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAqIDI1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPiAyLjM3NSkgYSA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA8IDApIGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA+IDIuMzc1KSBiID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiIDwgMCkgYiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID4gMi4zNzUpIGMgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPCAwKSBjID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPiAyLjM3NSkgZCA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDApIGQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW5nID0gKGErYitjK2QpLzYqMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdzLnB1c2goe1wid2Vla1wiOmluZGV4ICsgMSwgXCJyYXRpbmdcIjpNYXRoLnJvdW5kKChyYXRpbmcgKyAwLjAwMDAxKSAqIDEwMCkgLyAxMDAsXCJwaWRcIjpwbGF5ZXIuaWR9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYXRpbmdPYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJhdGluZ3MsIGZ1bmN0aW9uKHJhdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nT2JqW3JhdGluZy53ZWVrXSA9IHJhdGluZztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJhdGluZ09iaiwgZnVuY3Rpb24ocmF0aW5nLGkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZyA9IHJhdGluZ09ialtpLTFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcud2VlaysrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nLndlZWsgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcucmF0aW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nLnBpZCA9IHBsYXllci5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC8vZm9yICh2YXIgaSA9IDE7IGkgPCAxOTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGlmICghcmF0aW5nT2JqW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBpZiAoaSAhPSAxICYmIHJhdGluZ09ialtpLTFdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmF0aW5nT2JqW2ldID0gcmF0aW5nT2JqW2ktMV07XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmF0aW5nT2JqW2ldLndlZWsgPSBpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICByYXRpbmdPYmpbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmF0aW5nT2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmF0aW5ncyA9IF8udmFsdWVzKGdldFJhdGluZ3MocGxheWVyKSk7XG4gICAgICAgICAgICAgICAgLy9pZiAoIXBsYXllci5pZCA9PSAxKSB3ZWVrICs9IDM7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJhdGluZ3MgPSBfLnRha2UocmF0aW5ncywgd2Vlayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycyxmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NOYW1lID0gJ2phbWVpcyc7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCAhPSAxKSBwbGF5ZXIuY2xhc3NOYW1lID0gJ290aGVyJztcbiAgICAgICAgICAgICAgICBwbGF5ZXIucmF0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGQsaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZC53ZWVrID0gK2Qud2VlaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmF0aW5nID0gZC5yYXRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnBpZCA9IHBsYXllci5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDAgJiYgcGxheWVyLnJhdGluZ3NbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRpbmdzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlZWtcIjpwbGF5ZXIucmF0aW5nc1tpXS53ZWVrICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyYXRpbmdcIjpwbGF5ZXIucmF0aW5nc1tpXS5yYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGlkXCI6cGxheWVyLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmF0aW5nc1tpXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWVrXCI6IGkgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJhdGluZ1wiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBpZFwiOiBwbGF5ZXIuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gVGhpcyBsb29wIGNhbiBiZSB1c2VkIHRvIGNoZWNrIGlmIGFueSBkaWRuJ3QgZ2V0IHJhdGVkXG4gICAgICAgICAgICAvL18uZm9yRWFjaCgkc2NvcGUucGxheWVycyxmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgIC8vICAgIGlmIChwbGF5ZXIucmF0aW5ncy5sZW5ndGggPCBwbGF5ZXIuZ2FtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGF5ZXIucmF0aW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIubmFtZSwgcGxheWVyLnJhdGluZ3NbaV0ud2VlaylcbiAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAvL30pO1xuICAgICAgICAgICAgdmFyIG1hcmdpbiA9IHt0b3A6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDUwfTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IDk2MCAtIG1hcmdpbi5yaWdodCAtIG1hcmdpbi5sZWZ0O1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIHggPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCx3aWR0aF0pO1xuICAgICAgICAgICAgdmFyIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbaGVpZ2h0LDBdKTtcbiAgICAgICAgICAgIHZhciB4QXhpcyA9IGQzLnN2Zy5heGlzKCkuc2NhbGUoeCkub3JpZW50KFwiYm90dG9tXCIpLnRpY2tWYWx1ZXMoZDMucmFuZ2UoMSx3ZWVrICsgMSkpLnRpY2tGb3JtYXQoZDMuZm9ybWF0KFwiZFwiKSk7XG4gICAgICAgICAgICB2YXIgeUF4aXMgPSBkMy5zdmcuYXhpcygpLnNjYWxlKHkpLm9yaWVudChcImxlZnRcIik7XG4gICAgICAgICAgICB2YXIgbGluZSA9IGQzLnN2Zy5saW5lKClcbiAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KGQud2Vlayl9KVxuICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC5yYXRpbmcpfSlcbiAgICAgICAgICAgICAgICAuaW50ZXJwb2xhdGUoJ2Jhc2lzJyk7XG4gICAgICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KFwiI2dyYXBoXCIpLnNlbGVjdF9vcl9hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgICAgICAgICAgLnNlbGVjdF9vcl9hcHBlbmQoXCJnLmNvbnRhaW5lclwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcbiAgICAgICAgICAgIHguZG9tYWluKFsxLCBOdW1iZXIod2VlayldKTtcbiAgICAgICAgICAgIHkuZG9tYWluKFswLDE2MF0pO1xuXG4gICAgICAgICAgICB2YXIgbGluZXMgPSBzdmcuc2VsZWN0X29yX2FwcGVuZCgnZy5saW5lcycpLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgICAgICAgICAgLmRhdGEoJHNjb3BlLnBsYXllcnMucmV2ZXJzZSgpLGZ1bmN0aW9uKGQpe2lmKGQpey8qY29uc29sZS5sb2coZCk7Ki9yZXR1cm4gZC5pZDt9fSk7XG5cbiAgICAgICAgICAgIGxpbmVzLmVudGVyKCkuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihkKSB7IHJldHVybiBkLmNsYXNzTmFtZX0pXG4gICAgICAgICAgICAuYXR0cihcIm5hbWVcIixmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7cmV0dXJuIGxpbmUoZC5yYXRpbmdzKX0pO1xuXG4gICAgICAgICAgICBsaW5lcy5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihkKSB7IHJldHVybiBkLmNsYXNzTmFtZX0pXG4gICAgICAgICAgICAuYXR0cihcIm5hbWVcIixmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lfSlcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge3JldHVybiBsaW5lKGQucmF0aW5ncyl9KTtcblxuICAgICAgICAgICAgbGluZXMuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBzdmcuc2VsZWN0X29yX2FwcGVuZChcImcueFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoeEF4aXMpXG4gICAgICAgICAgICAgICAgLnNlbGVjdF9vcl9hcHBlbmQoXCJ0ZXh0LnhheGlzXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsMjUpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsNDUwKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJlbmRcIilcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJkeVwiLFwiLjcxZW1cIilcbiAgICAgICAgICAgICAgICAudGV4dChcIldlZWtcIik7XG5cbiAgICAgICAgICAgIHN2Zy5zZWxlY3Rfb3JfYXBwZW5kKFwiZy55XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAgICAgICAgIC5jYWxsKHlBeGlzKVxuICAgICAgICAgICAgICAgIC5zZWxlY3Rfb3JfYXBwZW5kKFwidGV4dC55YXhpc1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXCJyb3RhdGUoLTkwKVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLC01MClcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgLTE1MClcbiAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjcxZW1cIilcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLFwiZW5kXCIpXG4gICAgICAgICAgICAgICAgLnRleHQoXCJRQiBSYXRpbmcgKGN1bXVsYXRpdmUpXCIpO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5jaGFydEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUuZGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkb2N0eXBlID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBzdGFuZGFsb25lPVwibm9cIj8+PCFET0NUWVBFIHN2ZyBQVUJMSUMgXCItLy9XM0MvL0RURCBTVkcgMS4xLy9FTlwiIFwiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkXCI+JztcblxuICAgICAgICAgICAgd2luZG93LlVSTCA9ICh3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkwpO1xuXG4gICAgICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHksXG4gICAgICAgICAgICAgICAgZW1wdHlTdmc7XG5cbiAgICAgICAgICAgIHZhciBwcmVmaXggPSB7XG4gICAgICAgICAgICAgICAgeG1sbnM6IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIixcbiAgICAgICAgICAgICAgICB4bGluazogXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsXG4gICAgICAgICAgICAgICAgc3ZnOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGluaXRpYWxpemUoKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZG9jdW1lbnRzID0gW3dpbmRvdy5kb2N1bWVudF0sXG4gICAgICAgICAgICAgICAgICAgIFNWR1NvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZnJhbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImlmcmFtZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvYmplY3RcIik7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgZW1wdHkgc3ZnIGVsZW1lbnRcbiAgICAgICAgICAgICAgICB2YXIgZW1wdHlTdmcgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHByZWZpeC5zdmcsICdzdmcnKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbXB0eVN2Zyk7XG4gICAgICAgICAgICAgICAgdmFyIGVtcHR5U3ZnRGVjbGFyYXRpb25Db21wdXRlZCA9IGdldENvbXB1dGVkU3R5bGUoZW1wdHlTdmcpO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGlmcmFtZXMsIGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuY29udGVudERvY3VtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnRzLnB1c2goZWwuY29udGVudERvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChvYmplY3RzLCBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNvbnRlbnREb2N1bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50cy5wdXNoKGVsLmNvbnRlbnREb2N1bWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGRvYykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U291cmNlcyA9IGdldFNvdXJjZXMoZG9jLCBlbXB0eVN2Z0RlY2xhcmF0aW9uQ29tcHV0ZWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBiZWNhdXNlIG9mIHByb3RvdHlwZSBvbiBOWVQgcGFnZXNcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdTb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBTVkdTb3VyY2VzLnB1c2gobmV3U291cmNlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoU1ZHU291cmNlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBvcG92ZXIoU1ZHU291cmNlcyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChTVkdTb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQoU1ZHU291cmNlc1swXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGUgQ3Jvd2JhciBjb3VsZG7igJl0IGZpbmQgYW55IFNWRyBub2Rlcy5cIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBvcG92ZXIoc291cmNlcykge1xuICAgICAgICAgICAgICAgIGNsZWFudXAoKTtcblxuICAgICAgICAgICAgICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihzMSkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oczIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzMSAhPT0gczIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKE1hdGguYWJzKHMxLnRvcCAtIHMyLnRvcCkgPCAzOCkgJiYgKE1hdGguYWJzKHMxLmxlZnQgLSBzMi5sZWZ0KSA8IDM4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzMi50b3AgKz0gMzg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMyLmxlZnQgKz0gMzg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGJ1dHRvbnNDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgYnV0dG9uc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInN2Zy1jcm93YmFyXCIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuc3R5bGVbXCJ6LWluZGV4XCJdID0gMWU3O1xuICAgICAgICAgICAgICAgIGJ1dHRvbnNDb250YWluZXIuc3R5bGVbXCJwb3NpdGlvblwiXSA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLnN0eWxlW1widG9wXCJdID0gMDtcbiAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLnN0eWxlW1wibGVmdFwiXSA9IDA7XG5cblxuXG4gICAgICAgICAgICAgICAgdmFyIGJhY2tncm91bmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQoYmFja2dyb3VuZCk7XG5cbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic3ZnLWNyb3diYXJcIik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zdHlsZVtcImJhY2tncm91bmRcIl0gPSBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMC43KVwiO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQuc3R5bGVbXCJwb3NpdGlvblwiXSA9IFwiZml4ZWRcIjtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLnN0eWxlW1wibGVmdFwiXSA9IDA7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zdHlsZVtcInRvcFwiXSA9IDA7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zdHlsZVtcIndpZHRoXCJdID0gXCIxMDAlXCI7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5zdHlsZVtcImhlaWdodFwiXSA9IFwiMTAwJVwiO1xuXG4gICAgICAgICAgICAgICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbldyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25zQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbldyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwic3ZnLWNyb3diYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJwb3NpdGlvblwiXSA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcInRvcFwiXSA9IChkLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImxlZnRcIl0gPSAoZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0ICsgZC5sZWZ0KSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcInBhZGRpbmdcIl0gPSBcIjRweFwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wiYm9yZGVyLXJhZGl1c1wiXSA9IFwiM3B4XCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIuc3R5bGVbXCJjb2xvclwiXSA9IFwid2hpdGVcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcInRleHQtYWxpZ25cIl0gPSBcImNlbnRlclwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wiZm9udC1mYW1pbHlcIl0gPSBcIidIZWx2ZXRpY2EgTmV1ZSdcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uV3JhcHBlci5zdHlsZVtcImJhY2tncm91bmRcIl0gPSBcInJnYmEoMCwgMCwgMCwgMC44KVwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wiYm94LXNoYWRvd1wiXSA9IFwiMHB4IDRweCAxOHB4IHJnYmEoMCwgMCwgMCwgMC40KVwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLnN0eWxlW1wiY3Vyc29yXCJdID0gXCJtb3ZlXCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbldyYXBwZXIudGV4dENvbnRlbnQgPSAgXCJTVkcgI1wiICsgaSArIFwiOiBcIiArIChkLmlkID8gXCIjXCIgKyBkLmlkIDogXCJcIikgKyAoZC5jbGFzcyA/IFwiLlwiICsgZC5jbGFzcyA6IFwiXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgICAgICAgICAgICBidXR0b25XcmFwcGVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNvdXJjZS1pZFwiLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlW1wid2lkdGhcIl0gPSBcIjE1MHB4XCI7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZVtcImZvbnQtc2l6ZVwiXSA9IFwiMTJweFwiO1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc3R5bGVbXCJsaW5lLWhlaWdodFwiXSA9IFwiMS40ZW1cIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlW1wibWFyZ2luXCJdID0gXCI1cHggMCAwIDBcIjtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJEb3dubG9hZFwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVsLCBkLCBpLCBzb3VyY2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQoZCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICAgICAgICAgIHZhciBjcm93YmFyRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN2Zy1jcm93YmFyXCIpO1xuXG4gICAgICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGNyb3diYXJFbGVtZW50cywgZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U291cmNlcyhkb2MsIGVtcHR5U3ZnRGVjbGFyYXRpb25Db21wdXRlZCkge1xuICAgICAgICAgICAgICAgIHZhciBzdmdJbmZvID0gW10sXG4gICAgICAgICAgICAgICAgICAgIHN2Z3MgPSBkb2MucXVlcnlTZWxlY3RvckFsbChcInN2Z1wiKTtcblxuICAgICAgICAgICAgICAgIFtdLmZvckVhY2guY2FsbChzdmdzLCBmdW5jdGlvbiAoc3ZnKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcInZlcnNpb25cIiwgXCIxLjFcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgYXR0cmlidXRlcyBzbyB0aGV5IGFyZW4ndCBkb3VibGVkIHVwXG4gICAgICAgICAgICAgICAgICAgIHN2Zy5yZW1vdmVBdHRyaWJ1dGUoXCJ4bWxuc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc3ZnLnJlbW92ZUF0dHJpYnV0ZShcInhsaW5rXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZXNlIGFyZSBuZWVkZWQgZm9yIHRoZSBzdmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdmcuaGFzQXR0cmlidXRlTlMocHJlZml4LnhtbG5zLCBcInhtbG5zXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlTlMocHJlZml4LnhtbG5zLCBcInhtbG5zXCIsIHByZWZpeC5zdmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdmcuaGFzQXR0cmlidXRlTlMocHJlZml4LnhtbG5zLCBcInhtbG5zOnhsaW5rXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdmcuc2V0QXR0cmlidXRlTlMocHJlZml4LnhtbG5zLCBcInhtbG5zOnhsaW5rXCIsIHByZWZpeC54bGluayk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZXRJbmxpbmVTdHlsZXMoc3ZnLCBlbXB0eVN2Z0RlY2xhcmF0aW9uQ29tcHV0ZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSAobmV3IFhNTFNlcmlhbGl6ZXIoKSkuc2VyaWFsaXplVG9TdHJpbmcoc3ZnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBzdmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHN2Z0luZm8ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IHJlY3QudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogcmVjdC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IHN2Zy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzdmcuZ2V0QXR0cmlidXRlKFwiaWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEVsZW1lbnRDb3VudDogc3ZnLmNoaWxkRWxlbWVudENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBbZG9jdHlwZSArIHNvdXJjZV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN2Z0luZm87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGRvd25sb2FkKHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlbmFtZSA9IFwidW50aXRsZWRcIjtcblxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBzb3VyY2UuaWQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzb3VyY2UuY2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSBzb3VyY2UuY2xhc3M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZG9jdW1lbnQudGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZmlsZW5hbWUgPSB3aW5kb3cuZG9jdW1lbnQudGl0bGUucmVwbGFjZSgvW15hLXowLTldL2dpLCAnLScpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKHNvdXJjZS5zb3VyY2UsIHsgXCJ0eXBlXCIgOiBcInRleHRcXC94bWxcIiB9KSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInN2Zy1jcm93YmFyXCIpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZmlsZW5hbWUgKyBcIi5zdmdcIik7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHVybCk7XG4gICAgICAgICAgICAgICAgYS5zdHlsZVtcImRpc3BsYXlcIl0gPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBhLmNsaWNrKCk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRJbmxpbmVTdHlsZXMoc3ZnLCBlbXB0eVN2Z0RlY2xhcmF0aW9uQ29tcHV0ZWQpIHtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGV4cGxpY2l0bHlTZXRTdHlsZSAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY1NTU3R5bGVEZWNsYXJhdGlvbkNvbXB1dGVkID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGksIGxlbiwga2V5LCB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGVTdHIgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGk9MCwgbGVuPWNTU1N0eWxlRGVjbGFyYXRpb25Db21wdXRlZC5sZW5ndGg7IGk8bGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleT1jU1NTdHlsZURlY2xhcmF0aW9uQ29tcHV0ZWRbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1jU1NTdHlsZURlY2xhcmF0aW9uQ29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZShrZXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIT09ZW1wdHlTdmdEZWNsYXJhdGlvbkNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXB1dGVkU3R5bGVTdHIrPWtleStcIjpcIit2YWx1ZStcIjtcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb21wdXRlZFN0eWxlU3RyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhdmVyc2Uob2JqKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyZWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdHJlZS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIHZpc2l0KG9iaik7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHZpc2l0KG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT09IDEgJiYgY2hpbGQubm9kZU5hbWUgIT0gJ1NDUklQVCcpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5wdXNoKGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0KGNoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJlZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gaGFyZGNvZGUgY29tcHV0ZWQgY3NzIHN0eWxlcyBpbnNpZGUgc3ZnXG4gICAgICAgICAgICAgICAgdmFyIGFsbEVsZW1lbnRzID0gdHJhdmVyc2Uoc3ZnKTtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGFsbEVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoaS0tKXtcbiAgICAgICAgICAgICAgICAgICAgZXhwbGljaXRseVNldFN0eWxlKGFsbEVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9O1xuICAgIH0pO1xuXG5cblxuXG5cblxuXG5cblxuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbnN0b24nKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsIHNlYXJjaFN2Yyl7XG4gICAgICAgIC8vIFRoZXNlIHN0YXRlcyBjb3JyZXNwb25kIHRvIHRoZSBwYWdlcyBvbiB0aGUgYXBwLiBIb29rcyB1cCB0ZW1wbGF0ZXMgYW5kIHZpZXdzXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJyx7XG4gICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndXBkYXRlU3RhdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbWFpbkNUUkwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIHByZWxvYWRPYmo6IGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cCh7bWV0aG9kOidHRVQnLHVybDonL2FwaS9zdGF0cyd9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5zdGF0ZSgnc2VhcmNoJyx7XG4gICAgICAgICAgICAvLyAgICB1cmw6ICcvc2VhcmNoJyxcbiAgICAgICAgICAgIC8vICAgIHRlbXBsYXRlVXJsOiAnc2VhcmNoLmh0bWwnLFxuICAgICAgICAgICAgLy8gICAgY29udHJvbGxlcjogJ3NlYXJjaENUUkwnLFxuICAgICAgICAgICAgLy8gICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgLy8gICAgICAgIC8vIFRoaXMgcXVlcmllcyB0aGUgc2VydmVyIGZvciBkaXN0aW5jdCBkZXBhcnRtZW50cyBhbmQgcHJlbG9hZHMgdGhlIGRlcGFydG1lbnRzIGRyb3AgZG93blxuICAgICAgICAgICAgLy8gICAgICAgIHByZWxvYWRPQko6IGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIHJldHVybiAkaHR0cCh7bWV0aG9kOidHRVQnLHVybDonL2FwaS9kZXBhcnRtZW50cyd9KTtcbiAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAvL30pXG4gICAgICAgICAgICAvLy5zdGF0ZSgnZGV0YWlscycse1xuICAgICAgICAgICAgLy8gICAgLy8gVGhlIDppZCBpcyB0aGUgc3RyaW5nIHBhc3NlZCBpbiBmcm9tIHRoZSBVUkwgY29ycmVzcG9uZHMgdG8gdGhlIHBlcnNvbklEIGluIHRoZSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIC8vICAgIHVybDogJy9kZXRhaWxzLzppZCcsXG4gICAgICAgICAgICAvLyAgICB0ZW1wbGF0ZVVybDogJ2RldGFpbHMuaHRtbCcsXG4gICAgICAgICAgICAvLyAgICBjb250cm9sbGVyOiAnZGV0YWlsQ1RSTCdcbiAgICAgICAgICAgIC8vfSlcbiAgICB9XSlcbiAgICAucnVuKFsnJHN0YXRlJyxmdW5jdGlvbigkc3RhdGUpe1xuICAgICAgICAvLyBFdmVyeXRoaW5nIGluc2lkZSBoZXJlIHdpbGwgYmUgcnVuIG9uZSB0aW1lIG9uY2UgdGhlIGFwcCBoYXMgbG9hZGVkLiBHb29kIHBsYWNlIHRvIGluaXRpYWxpemUgYW55dGhpbmcgeW91IHdpbGwgYmUgdXNpbmdcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgfV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9