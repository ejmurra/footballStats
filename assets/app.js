angular.module("winston",["ui.router"]),angular.module("winston").service("apiSVC",["$http",function(a){this.addNew=function(s){return a.post("/api/stats/add",s)},this.remove=function(){return a.get("/api/stats/remove")},this.load=function(){return a.get("/api/stats")}}]),angular.module("winston").controller("mainCTRL",["$scope","apiSVC","preloadObj",function(a,s,t){function n(s){_.forEach(a.players,function(t){function n(a){var s,t=[];_.forEach(a.games,function(n,e){if(3==a.id&&console.log(e,n),s||1!=n.g)if(s||n.g){if(null!=n.passing_comp&&(s.passing_comp+=n.passing_comp),null!=n.passing_yds&&(s.passing_yds+=n.passing_yds),null!=n.passing_td&&(s.passing_td+=n.passing_td),null!=n.passing_att&&(s.passing_att+=n.passing_att),null!=n.passing_int&&(s.passing_int+=n.passing_int),null!=s.passing_att&&0!=s.passing_att){var l=5*(s.passing_comp/s.passing_att-.3),i=.25*(s.passing_yds/s.passing_att-3),r=s.passing_td/s.passing_att*20,p=2.375-s.passing_int/s.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),p>2.375&&(p=2.375),0>p&&(p=0);var u=(l+i+r+p)/6*100;t.push({week:e+1,rating:Math.round(100*(u+1e-5))/100,pid:a.id})}}else t.push({week:e+1,rating:null,pid:a.id});else if(s={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0},null!=n.passing_comp&&(s.passing_comp+=n.passing_comp),null!=n.passing_yds&&(s.passing_yds+=n.passing_yds),null!=n.passing_td&&(s.passing_td+=n.passing_td),null!=n.passing_att&&(s.passing_att+=n.passing_att),null!=n.passing_int&&(s.passing_int+=n.passing_int),null!=s.passing_att&&0!=s.passing_att){var l=5*(s.passing_comp/s.passing_att-.3),i=.25*(s.passing_yds/s.passing_att-3),r=s.passing_td/s.passing_att*20,p=2.375-s.passing_int/s.passing_att*25;l>2.375&&(l=2.375),0>l&&(l=0),i>2.375&&(i=2.375),0>i&&(i=0),r>2.375&&(r=2.375),0>r&&(r=0),p>2.375&&(p=2.375),0>p&&(p=0);var u=(l+i+r+p)/6*100;t.push({week:e+1,rating:Math.round(100*(u+1e-5))/100,pid:a.id})}});var n={};return _.forEach(t,function(a){n[a.week]=a}),3==a.id&&(console.log(n),console.log(t)),_.forEach(n,function(s,t){3==a.id&&console.log(s,t),s||(0!=t?(s=n[t-1],s.week++):(s.week=1,s.rating=null,s.pid=a.id))}),n}t.games=[],_.forEach(a.games,function(a){a.player==t.id&&t.games.push(a)}),_.sortBy(t.games,function(a){return a.week});var e=_.values(n(t));t.ratings=_.take(e,s),3==t.id&&(console.log(e),console.log(t.ratings))}),_.forEach(a.players,function(a){a.className="jameis",1!=a.id&&(a.className="other"),a.ratings.forEach(function(s,t){s?(s.week=+s.week,s.rating=s.rating,s.pid=a.id):0!=t&&null!=a.ratings[t]?a.ratings[t]={week:a.ratings[t].week+1,rating:a.ratings[t].rating,pid:a.id}:a.ratings[t]={week:t+1,rating:null,pid:a.id}})});var t={top:20,right:20,bottom:30,left:50},n=960-t.right-t.left,e=500-t.top-t.bottom,l=d3.scale.linear().range([0,n]),i=d3.scale.linear().range([e,0]),r=d3.svg.axis().scale(l).orient("bottom").tickValues(d3.range(1,s+1)).tickFormat(d3.format("d")),p=d3.svg.axis().scale(i).orient("left"),u=d3.svg.line().x(function(a){return l(a.week)}).y(function(a){return i(a.rating)}).interpolate("step-after"),o=d3.select("#graph").select_or_append("svg").attr("width",n+t.left+t.right).attr("height",e+t.top+t.bottom).select_or_append("g.container").attr("transform","translate("+t.left+","+t.top+")");l.domain([1,Number(s)]),i.domain([0,158.3]);var g=o.select_or_append("g.lines").selectAll("path").data(a.players.reverse(),function(a){return a?a.id:void 0});g.enter().append("path").attr("class",function(a){return a.className}).attr("name",function(a){return a.name}).attr("d",function(a){return u(a.ratings)}),g.attr("class",function(a){return a.className}).attr("name",function(a){return a.name}).transition().attr("d",function(a){return u(a.ratings)}),g.exit().remove(),o.select_or_append("g.x").attr("class","x axis").attr("transform","translate(0,"+e+")").call(r),o.select_or_append("g.y").attr("class","y axis").call(p).select_or_append("text.yaxis").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("QB Rating (cumulative)")}a._showInput=!1;var e=function(){return[{key:"week",val:null},{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]},l=function(){return[{key:"date",val:null},{key:"g",val:null},{key:"gs",val:null},{key:"pass_comp",val:null},{key:"pass_att",val:null},{key:"pass_pct",val:null},{key:"pass_yds",val:null},{key:"pass_avg",val:null},{key:"pass_td",val:null},{key:"pass_int",val:null},{key:"pass_sck",val:null},{key:"pass_scky",val:null},{key:"pass_rate",val:null},{key:"rush_att",val:null},{key:"rush_yds",val:null},{key:"rush_avg",val:null},{key:"rush_td",val:null},{key:"fum",val:null},{key:"fum_lost",val:null}]};"err"==t.data.status&&console.log(t.data.message),a.gameStats=t.data.data.winston,a.stats=new e,a.Ustats=new l,a.newStats=function(){s.addNew(a.Ustats).success(function(t){"success"==t.status?(a.Ustats=new l,a.toggleInput(),s.load().success(function(s){a.gameStats=s.data.winston})):"game_pk"==t.message.constraint?alert("Error: That game already exists in the database. Delete it first if you want to update it"):alert("Error: "+JSON.stringify(t.message.detail))})},a.toggleInput=function(){a._showInput=!a._showInput},a.deleteRow=function(){0!=a.gameStats&&s.remove().success(function(t){"success"==t.status&&s.load().success(function(s){a.gameStats=s.data.winston})})},a.maxGames=function(){var s=0;_.forEach(a.players,function(a){a.games.length>s&&(s=a.games.length)});for(var t=[],n=1;s+1>n;n++)t.push(n);return t},a.players=t.data.data.players,a.games=t.data.data.games,_.forEach(a.players,function(s){s.games=[],_.forEach(a.games,function(a){a.player===s.id&&s.games.push(a)})});var i=function(a,s){function t(a){if(null!=a.passing_att&&0!=a.passing_att){var s=5*(e.passing_comp/e.passing_att-.3),t=.25*(e.passing_yds/e.passing_att-3),n=e.passing_td/e.passing_att*20,l=2.375-e.passing_int/e.passing_att*25;return s>2.375&&(s=2.375),0>s&&(s=0),t>2.375&&(t=2.375),0>t&&(t=0),n>2.375&&(n=2.375),0>n&&(n=0),l>2.375&&(l=2.375),0>l&&(l=0),(s+t+n+l)/6*100}}var n=_.take(a.games,s),e={passing_comp:0,passing_yds:0,passing_td:0,passing_att:0,passing_int:0};return _.forEach(n,function(a){null!=a.passing_comp&&(e.passing_comp+=a.passing_comp),null!=a.passing_yds&&(e.passing_yds+=a.passing_yds),null!=a.passing_td&&(e.passing_td+=a.passing_td),null!=a.passing_att&&(e.passing_att+=a.passing_att),null!=a.passing_int&&(e.passing_int+=a.passing_int)}),a.rating=t(e),a};a.ratePlayers=function(){var t=$("#week2rate").val().split(" ")[1],e=[];a.rated=[],s.load().success(function(s){a.players=s.data.players,a.games=s.data.games,a.gameStates=s.data.winston,_.forEach(a.players,function(s){s.games=[],_.forEach(a.games,function(a){a.player===s.id&&s.games.push(a)}),_.sortBy(s.games,function(a){return a.week})}),_.forEach(a.players,function(a){i(a,t),e.push({player:a.name,rating:Math.round(100*(a.rating+1e-5))/100,id:"p"+a.id})});var l=_.sortBy(e,function(a){return a.rating});l=_.filter(l,function(a){return a.rating}),_.forEach(l.reverse(),function(s,t){s.rank=t+1,a.rated.push(s)}),n(t)})}}]),angular.module("winston").config(["$stateProvider",function(a,s){a.state("home",{url:"/",templateUrl:"updateStats.html",controller:"mainCTRL",resolve:{preloadObj:["$http",function(a){return a({method:"GET",url:"/api/stats"})}]}})}]).run(["$state",function(a){a.go("home")}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwaVNWQy5qcyIsIm1haW5DVExSTC5qcyIsInJvdXRlcy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImFkZE5ldyIsIml0ZW0iLCJwb3N0IiwicmVtb3ZlIiwiZ2V0IiwibG9hZCIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJhcGlTVkMiLCJwcmVsb2FkT2JqIiwiZHJhd0dyYXBoaWNzIiwid2VlayIsIl8iLCJmb3JFYWNoIiwicGxheWVycyIsInBsYXllciIsImdldFJhdGluZ3MiLCJzdGF0c0N1bSIsInJhdGluZ3MiLCJnYW1lcyIsImdhbWUiLCJpbmRleCIsImlkIiwiY29uc29sZSIsImxvZyIsImciLCJwYXNzaW5nX2NvbXAiLCJwYXNzaW5nX3lkcyIsInBhc3NpbmdfdGQiLCJwYXNzaW5nX2F0dCIsInBhc3NpbmdfaW50IiwiYSIsImIiLCJjIiwiZCIsInJhdGluZyIsInB1c2giLCJNYXRoIiwicm91bmQiLCJwaWQiLCJyYXRpbmdPYmoiLCJpIiwic29ydEJ5IiwidmFsdWVzIiwidGFrZSIsImNsYXNzTmFtZSIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwiaGVpZ2h0IiwieCIsImQzIiwic2NhbGUiLCJsaW5lYXIiLCJyYW5nZSIsInkiLCJ4QXhpcyIsInN2ZyIsImF4aXMiLCJvcmllbnQiLCJ0aWNrVmFsdWVzIiwidGlja0Zvcm1hdCIsImZvcm1hdCIsInlBeGlzIiwibGluZSIsImludGVycG9sYXRlIiwic2VsZWN0Iiwic2VsZWN0X29yX2FwcGVuZCIsImF0dHIiLCJkb21haW4iLCJOdW1iZXIiLCJsaW5lcyIsInNlbGVjdEFsbCIsImRhdGEiLCJyZXZlcnNlIiwiZW50ZXIiLCJhcHBlbmQiLCJuYW1lIiwidHJhbnNpdGlvbiIsImV4aXQiLCJjYWxsIiwic3R5bGUiLCJ0ZXh0IiwiX3Nob3dJbnB1dCIsInN0YXRzIiwia2V5IiwidmFsIiwiVXN0YXRzIiwic3RhdHVzIiwibWVzc2FnZSIsImdhbWVTdGF0cyIsIndpbnN0b24iLCJuZXdTdGF0cyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ0b2dnbGVJbnB1dCIsImNvbnN0cmFpbnQiLCJhbGVydCIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZXRhaWwiLCJkZWxldGVSb3ciLCJyZXNwb25zZSIsIm1heEdhbWVzIiwibWF4IiwibGVuZ3RoIiwid2Vla3MiLCJhY2N1bXVsYXRlU3RhdHMiLCJyYXRlIiwicmF0ZVBsYXllcnMiLCIkIiwic3BsaXQiLCJyYXRlZCIsInBsYXllcnNPYmoiLCJnYW1lU3RhdGVzIiwicmFua2VkIiwiZmlsdGVyIiwicCIsInJhbmsiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsInNlYXJjaFN2YyIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJyZXNvbHZlIiwibWV0aG9kIiwicnVuIiwiJHN0YXRlIiwiZ28iXSwibWFwcGluZ3MiOiJBQUNBQSxRQUFBQyxPQUFBLFdBQUEsY0NEQUQsUUFBQUMsT0FBQSxXQUNBQyxRQUFBLFVBQUEsUUFBQSxTQUFBQyxHQUNBQyxLQUFBQyxPQUFBLFNBQUFDLEdBQ0EsTUFBQUgsR0FBQUksS0FBQSxpQkFBQUQsSUFFQUYsS0FBQUksT0FBQSxXQUNBLE1BQUFMLEdBQUFNLElBQUEsc0JBRUFMLEtBQUFNLEtBQUEsV0FDQSxNQUFBUCxHQUFBTSxJQUFBLGtCQ1RBVCxRQUFBQyxPQUFBLFdBQ0FVLFdBQUEsWUFBQSxTQUFBLFNBQUEsYUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQTJTQSxRQUFBQyxHQUFBQyxHQUNBQyxFQUFBQyxRQUFBTixFQUFBTyxRQUFBLFNBQUFDLEdBUUEsUUFBQUMsR0FBQUQsR0FDQSxHQUNBRSxHQURBQyxJQUVBTixHQUFBQyxRQUFBRSxFQUFBSSxNQUFBLFNBQUFDLEVBQUFDLEdBRUEsR0FEQSxHQUFBTixFQUFBTyxJQUFBQyxRQUFBQyxJQUFBSCxFQUFBRCxHQUNBSCxHQUFBLEdBQUFHLEVBQUFLLEVBOEJBLEdBQUFSLEdBQUFHLEVBQUFLLEdBU0EsR0FMQSxNQUFBTCxFQUFBTSxlQUFBVCxFQUFBUyxjQUFBTixFQUFBTSxjQUNBLE1BQUFOLEVBQUFPLGNBQUFWLEVBQUFVLGFBQUFQLEVBQUFPLGFBQ0EsTUFBQVAsRUFBQVEsYUFBQVgsRUFBQVcsWUFBQVIsRUFBQVEsWUFDQSxNQUFBUixFQUFBUyxjQUFBWixFQUFBWSxhQUFBVCxFQUFBUyxhQUNBLE1BQUFULEVBQUFVLGNBQUFiLEVBQUFhLGFBQUFWLEVBQUFVLGFBQ0EsTUFBQWIsRUFBQVksYUFBQSxHQUFBWixFQUFBWSxZQUFBLENBRUEsR0FBQUUsR0FBQSxHQUFBZCxFQUFBUyxhQUFBVCxFQUFBWSxZQUFBLElBQ0FHLEVBQUEsS0FBQWYsRUFBQVUsWUFBQVYsRUFBQVksWUFBQSxHQUNBSSxFQUFBaEIsRUFBQVcsV0FBQVgsRUFBQVksWUFBQSxHQUNBSyxFQUFBLE1BQUFqQixFQUFBYSxZQUFBYixFQUFBWSxZQUFBLEVBQ0FFLEdBQUEsUUFBQUEsRUFBQSxPQUNBLEVBQUFBLElBQUFBLEVBQUEsR0FDQUMsRUFBQSxRQUFBQSxFQUFBLE9BQ0EsRUFBQUEsSUFBQUEsRUFBQSxHQUNBQyxFQUFBLFFBQUFBLEVBQUEsT0FDQSxFQUFBQSxJQUFBQSxFQUFBLEdBQ0FDLEVBQUEsUUFBQUEsRUFBQSxPQUNBLEVBQUFBLElBQUFBLEVBQUEsRUFDQSxJQUFBQyxJQUFBSixFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLEVBQUEsR0FDQWhCLEdBQUFrQixNQUFBekIsS0FBQVUsRUFBQSxFQUFBYyxPQUFBRSxLQUFBQyxNQUFBLEtBQUFILEVBQUEsT0FBQSxJQUFBSSxJQUFBeEIsRUFBQU8sVUF2QkFKLEdBQUFrQixNQUFBekIsS0FBQVUsRUFBQSxFQUFBYyxPQUFBLEtBQUFJLElBQUF4QixFQUFBTyxTQWxCQSxJQVpBTCxHQUNBUyxhQUFBLEVBQ0FDLFlBQUEsRUFDQUMsV0FBQSxFQUNBQyxZQUFBLEVBQ0FDLFlBQUEsR0FFQSxNQUFBVixFQUFBTSxlQUFBVCxFQUFBUyxjQUFBTixFQUFBTSxjQUNBLE1BQUFOLEVBQUFPLGNBQUFWLEVBQUFVLGFBQUFQLEVBQUFPLGFBQ0EsTUFBQVAsRUFBQVEsYUFBQVgsRUFBQVcsWUFBQVIsRUFBQVEsWUFDQSxNQUFBUixFQUFBUyxjQUFBWixFQUFBWSxhQUFBVCxFQUFBUyxhQUNBLE1BQUFULEVBQUFVLGNBQUFiLEVBQUFhLGFBQUFWLEVBQUFVLGFBQ0EsTUFBQWIsRUFBQVksYUFBQSxHQUFBWixFQUFBWSxZQUFBLENBRUEsR0FBQUUsR0FBQSxHQUFBZCxFQUFBUyxhQUFBVCxFQUFBWSxZQUFBLElBQ0FHLEVBQUEsS0FBQWYsRUFBQVUsWUFBQVYsRUFBQVksWUFBQSxHQUNBSSxFQUFBaEIsRUFBQVcsV0FBQVgsRUFBQVksWUFBQSxHQUNBSyxFQUFBLE1BQUFqQixFQUFBYSxZQUFBYixFQUFBWSxZQUFBLEVBQ0FFLEdBQUEsUUFBQUEsRUFBQSxPQUNBLEVBQUFBLElBQUFBLEVBQUEsR0FDQUMsRUFBQSxRQUFBQSxFQUFBLE9BQ0EsRUFBQUEsSUFBQUEsRUFBQSxHQUNBQyxFQUFBLFFBQUFBLEVBQUEsT0FDQSxFQUFBQSxJQUFBQSxFQUFBLEdBQ0FDLEVBQUEsUUFBQUEsRUFBQSxPQUNBLEVBQUFBLElBQUFBLEVBQUEsRUFDQSxJQUFBQyxJQUFBSixFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLEVBQUEsR0FDQWhCLEdBQUFrQixNQUFBekIsS0FBQVUsRUFBQSxFQUFBYyxPQUFBRSxLQUFBQyxNQUFBLEtBQUFILEVBQUEsT0FBQSxJQUFBSSxJQUFBeEIsRUFBQU8sT0E4QkEsSUFBQWtCLEtBNEJBLE9BM0JBNUIsR0FBQUMsUUFBQUssRUFBQSxTQUFBaUIsR0FDQUssRUFBQUwsRUFBQXhCLE1BQUF3QixJQUVBLEdBQUFwQixFQUFBTyxLQUFBQyxRQUFBQyxJQUFBZ0IsR0FBQWpCLFFBQUFDLElBQUFOLElBQ0FOLEVBQUFDLFFBQUEyQixFQUFBLFNBQUFMLEVBQUFNLEdBQ0EsR0FBQTFCLEVBQUFPLElBQUFDLFFBQUFDLElBQUFXLEVBQUFNLEdBQ0FOLElBQ0EsR0FBQU0sR0FDQU4sRUFBQUssRUFBQUMsRUFBQSxHQUNBTixFQUFBeEIsU0FFQXdCLEVBQUF4QixLQUFBLEVBQ0F3QixFQUFBQSxPQUFBLEtBQ0FBLEVBQUFJLElBQUF4QixFQUFBTyxPQWNBa0IsRUFsR0F6QixFQUFBSSxTQUNBUCxFQUFBQyxRQUFBTixFQUFBWSxNQUFBLFNBQUFDLEdBQ0FBLEVBQUFMLFFBQUFBLEVBQUFPLElBQUFQLEVBQUFJLE1BQUFpQixLQUFBaEIsS0FFQVIsRUFBQThCLE9BQUEzQixFQUFBSSxNQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVQsTUErRkEsSUFBQU8sR0FBQU4sRUFBQStCLE9BQUEzQixFQUFBRCxHQUVBQSxHQUFBRyxRQUFBTixFQUFBZ0MsS0FBQTFCLEVBQUFQLEdBQ0EsR0FBQUksRUFBQU8sS0FDQUMsUUFBQUMsSUFBQU4sR0FDQUssUUFBQUMsSUFBQVQsRUFBQUcsWUFHQU4sRUFBQUMsUUFBQU4sRUFBQU8sUUFBQSxTQUFBQyxHQUNBQSxFQUFBOEIsVUFBQSxTQUNBLEdBQUE5QixFQUFBTyxLQUFBUCxFQUFBOEIsVUFBQSxTQUNBOUIsRUFBQUcsUUFBQUwsUUFBQSxTQUFBcUIsRUFBQU8sR0FDQVAsR0FDQUEsRUFBQXZCLE1BQUF1QixFQUFBdkIsS0FDQXVCLEVBQUFDLE9BQUFELEVBQUFDLE9BQ0FELEVBQUFLLElBQUF4QixFQUFBTyxJQUVBLEdBQUFtQixHQUFBLE1BQUExQixFQUFBRyxRQUFBdUIsR0FDQTFCLEVBQUFHLFFBQUF1QixJQUNBOUIsS0FBQUksRUFBQUcsUUFBQXVCLEdBQUE5QixLQUFBLEVBQ0F3QixPQUFBcEIsRUFBQUcsUUFBQXVCLEdBQUFOLE9BQ0FJLElBQUF4QixFQUFBTyxJQUdBUCxFQUFBRyxRQUFBdUIsSUFDQTlCLEtBQUE4QixFQUFBLEVBQ0FOLE9BQUEsS0FDQUksSUFBQXhCLEVBQUFPLE9BVUEsSUFBQXdCLElBQUFDLElBQUEsR0FBQUMsTUFBQSxHQUFBQyxPQUFBLEdBQUFDLEtBQUEsSUFDQUMsRUFBQSxJQUFBTCxFQUFBRSxNQUFBRixFQUFBSSxLQUNBRSxFQUFBLElBQUFOLEVBQUFDLElBQUFELEVBQUFHLE9BQ0FJLEVBQUFDLEdBQUFDLE1BQUFDLFNBQUFDLE9BQUEsRUFBQU4sSUFDQU8sRUFBQUosR0FBQUMsTUFBQUMsU0FBQUMsT0FBQUwsRUFBQSxJQUNBTyxFQUFBTCxHQUFBTSxJQUFBQyxPQUFBTixNQUFBRixHQUFBUyxPQUFBLFVBQUFDLFdBQUFULEdBQUFHLE1BQUEsRUFBQTlDLEVBQUEsSUFBQXFELFdBQUFWLEdBQUFXLE9BQUEsTUFDQUMsRUFBQVosR0FBQU0sSUFBQUMsT0FBQU4sTUFBQUcsR0FBQUksT0FBQSxRQUNBSyxFQUFBYixHQUFBTSxJQUFBTyxPQUNBZCxFQUFBLFNBQUFuQixHQUFBLE1BQUFtQixHQUFBbkIsRUFBQXZCLFFBQ0ErQyxFQUFBLFNBQUF4QixHQUFBLE1BQUF3QixHQUFBeEIsRUFBQUMsVUFDQWlDLFlBQUEsY0FDQVIsRUFBQU4sR0FBQWUsT0FBQSxVQUFBQyxpQkFBQSxPQUNBQyxLQUFBLFFBQUFwQixFQUFBTCxFQUFBSSxLQUFBSixFQUFBRSxPQUNBdUIsS0FBQSxTQUFBbkIsRUFBQU4sRUFBQUMsSUFBQUQsRUFBQUcsUUFDQXFCLGlCQUFBLGVBQ0FDLEtBQUEsWUFBQSxhQUFBekIsRUFBQUksS0FBQSxJQUFBSixFQUFBQyxJQUFBLElBQ0FNLEdBQUFtQixRQUFBLEVBQUFDLE9BQUE5RCxLQUNBK0MsRUFBQWMsUUFBQSxFQUFBLE9BR0EsSUFBQUUsR0FBQWQsRUFBQVUsaUJBQUEsV0FBQUssVUFBQSxRQUNBQyxLQUFBckUsRUFBQU8sUUFBQStELFVBQUEsU0FBQTNDLEdBQUEsTUFBQUEsR0FBQUEsRUFBQVosR0FBQSxRQUVBb0QsR0FBQUksUUFBQUMsT0FBQSxRQUNBUixLQUFBLFFBQUEsU0FBQXJDLEdBQUEsTUFBQUEsR0FBQVcsWUFDQTBCLEtBQUEsT0FBQSxTQUFBckMsR0FBQSxNQUFBQSxHQUFBOEMsT0FDQVQsS0FBQSxJQUFBLFNBQUFyQyxHQUFBLE1BQUFpQyxHQUFBakMsRUFBQWhCLFdBRUF3RCxFQUFBSCxLQUFBLFFBQUEsU0FBQXJDLEdBQUEsTUFBQUEsR0FBQVcsWUFDQTBCLEtBQUEsT0FBQSxTQUFBckMsR0FBQSxNQUFBQSxHQUFBOEMsT0FDQUMsYUFBQVYsS0FBQSxJQUFBLFNBQUFyQyxHQUFBLE1BQUFpQyxHQUFBakMsRUFBQWhCLFdBRUF3RCxFQUFBUSxPQUFBL0UsU0FFQXlELEVBQUFVLGlCQUFBLE9BQ0FDLEtBQUEsUUFBQSxVQUNBQSxLQUFBLFlBQUEsZUFBQW5CLEVBQUEsS0FDQStCLEtBQUF4QixHQUVBQyxFQUFBVSxpQkFBQSxPQUNBQyxLQUFBLFFBQUEsVUFDQVksS0FBQWpCLEdBQ0FJLGlCQUFBLGNBQ0FDLEtBQUEsWUFBQSxlQUNBQSxLQUFBLElBQUEsR0FDQUEsS0FBQSxLQUFBLFNBQ0FhLE1BQUEsY0FBQSxPQUNBQyxLQUFBLDBCQXBlQTlFLEVBQUErRSxZQUFBLENBQ0EsSUFBQUMsR0FBQSxXQUNBLFFBRUFDLElBQUEsT0FDQUMsSUFBQSxPQUdBRCxJQUFBLE9BQ0FDLElBQUEsT0FHQUQsSUFBQSxJQUNBQyxJQUFBLE9BR0FELElBQUEsS0FDQUMsSUFBQSxPQUdBRCxJQUFBLFlBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsVUFDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsWUFDQUMsSUFBQSxPQUdBRCxJQUFBLFlBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxVQUNBQyxJQUFBLE9BR0FELElBQUEsTUFDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsUUFJQUMsRUFBQSxXQUNBLFFBRUFGLElBQUEsT0FDQUMsSUFBQSxPQUdBRCxJQUFBLElBQ0FDLElBQUEsT0FHQUQsSUFBQSxLQUNBQyxJQUFBLE9BR0FELElBQUEsWUFDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxVQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxZQUNBQyxJQUFBLE9BR0FELElBQUEsWUFDQUMsSUFBQSxPQUdBRCxJQUFBLFdBQ0FDLElBQUEsT0FHQUQsSUFBQSxXQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUdBRCxJQUFBLFVBQ0FDLElBQUEsT0FHQUQsSUFBQSxNQUNBQyxJQUFBLE9BR0FELElBQUEsV0FDQUMsSUFBQSxPQUlBLFFBQUFoRixFQUFBbUUsS0FBQWUsUUFBQXBFLFFBQUFDLElBQUFmLEVBQUFtRSxLQUFBZ0IsU0FDQXJGLEVBQUFzRixVQUFBcEYsRUFBQW1FLEtBQUFBLEtBQUFrQixRQUNBdkYsRUFBQWdGLE1BQUEsR0FBQUEsR0FDQWhGLEVBQUFtRixPQUFBLEdBQUFBLEdBSUFuRixFQUFBd0YsU0FBQSxXQUNBdkYsRUFBQVIsT0FBQU8sRUFBQW1GLFFBQUFNLFFBQUEsU0FBQUMsR0FDQSxXQUFBQSxFQUFBTixRQUNBcEYsRUFBQW1GLE9BQUEsR0FBQUEsR0FDQW5GLEVBQUEyRixjQUNBMUYsRUFBQUgsT0FBQTJGLFFBQUEsU0FBQXBCLEdBQ0FyRSxFQUFBc0YsVUFBQWpCLEVBQUFBLEtBQUFrQixXQUVBLFdBQUFHLEVBQUFMLFFBQUFPLFdBQ0FDLE1BQUEsNkZBR0FBLE1BQUEsVUFBQUMsS0FBQUMsVUFBQUwsRUFBQUwsUUFBQVcsWUFLQWhHLEVBQUEyRixZQUFBLFdBQ0EzRixFQUFBK0UsWUFBQS9FLEVBQUErRSxZQUVBL0UsRUFBQWlHLFVBQUEsV0FDQSxHQUFBakcsRUFBQXNGLFdBQ0FyRixFQUFBTCxTQUFBNkYsUUFBQSxTQUFBUyxHQUNBLFdBQUFBLEVBQUFkLFFBQ0FuRixFQUFBSCxPQUFBMkYsUUFBQSxTQUFBcEIsR0FDQXJFLEVBQUFzRixVQUFBakIsRUFBQUEsS0FBQWtCLGFBTUF2RixFQUFBbUcsU0FBQSxXQUNBLEdBQUFDLEdBQUEsQ0FDQS9GLEdBQUFDLFFBQUFOLEVBQUFPLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUksTUFBQXlGLE9BQUFELElBQUFBLEVBQUE1RixFQUFBSSxNQUFBeUYsU0FHQSxLQUFBLEdBREFDLE1BQ0FwRSxFQUFBLEVBQUFrRSxFQUFBLEVBQUFsRSxFQUFBQSxJQUNBb0UsRUFBQXpFLEtBQUFLLEVBRUEsT0FBQW9FLElBRUF0RyxFQUFBTyxRQUFBTCxFQUFBbUUsS0FBQUEsS0FBQTlELFFBQ0FQLEVBQUFZLE1BQUFWLEVBQUFtRSxLQUFBQSxLQUFBekQsTUFDQVAsRUFBQUMsUUFBQU4sRUFBQU8sUUFBQSxTQUFBQyxHQUNBQSxFQUFBSSxTQUNBUCxFQUFBQyxRQUFBTixFQUFBWSxNQUFBLFNBQUFDLEdBQ0FBLEVBQUFMLFNBQUFBLEVBQUFPLElBQUFQLEVBQUFJLE1BQUFpQixLQUFBaEIsTUFHQSxJQUFBMEYsR0FBQSxTQUFBL0YsRUFBQUosR0FnQkEsUUFBQW9HLEdBQUF4QixHQUNBLEdBQUEsTUFBQUEsRUFBQTFELGFBQUEsR0FBQTBELEVBQUExRCxZQUFBLENBRUEsR0FBQUUsR0FBQSxHQUFBZCxFQUFBUyxhQUFBVCxFQUFBWSxZQUFBLElBQ0FHLEVBQUEsS0FBQWYsRUFBQVUsWUFBQVYsRUFBQVksWUFBQSxHQUNBSSxFQUFBaEIsRUFBQVcsV0FBQVgsRUFBQVksWUFBQSxHQUNBSyxFQUFBLE1BQUFqQixFQUFBYSxZQUFBYixFQUFBWSxZQUFBLEVBU0EsT0FSQUUsR0FBQSxRQUFBQSxFQUFBLE9BQ0EsRUFBQUEsSUFBQUEsRUFBQSxHQUNBQyxFQUFBLFFBQUFBLEVBQUEsT0FDQSxFQUFBQSxJQUFBQSxFQUFBLEdBQ0FDLEVBQUEsUUFBQUEsRUFBQSxPQUNBLEVBQUFBLElBQUFBLEVBQUEsR0FDQUMsRUFBQSxRQUFBQSxFQUFBLE9BQ0EsRUFBQUEsSUFBQUEsRUFBQSxJQUNBSCxFQUFBQyxFQUFBQyxFQUFBQyxHQUFBLEVBQUEsS0E5QkEsR0FBQWYsR0FBQVAsRUFBQWdDLEtBQUE3QixFQUFBSSxNQUFBUixHQUNBTSxHQUNBUyxhQUFBLEVBQ0FDLFlBQUEsRUFDQUMsV0FBQSxFQUNBQyxZQUFBLEVBQ0FDLFlBQUEsRUE2QkEsT0EzQkFsQixHQUFBQyxRQUFBTSxFQUFBLFNBQUFDLEdBQ0EsTUFBQUEsRUFBQU0sZUFBQVQsRUFBQVMsY0FBQU4sRUFBQU0sY0FDQSxNQUFBTixFQUFBTyxjQUFBVixFQUFBVSxhQUFBUCxFQUFBTyxhQUNBLE1BQUFQLEVBQUFRLGFBQUFYLEVBQUFXLFlBQUFSLEVBQUFRLFlBQ0EsTUFBQVIsRUFBQVMsY0FBQVosRUFBQVksYUFBQVQsRUFBQVMsYUFDQSxNQUFBVCxFQUFBVSxjQUFBYixFQUFBYSxhQUFBVixFQUFBVSxlQXFCQWYsRUFBQW9CLE9BQUE0RSxFQUFBOUYsR0FDQUYsRUFFQVIsR0FBQXlHLFlBQUEsV0FDQSxHQUFBckcsR0FBQXNHLEVBQUEsY0FBQXhCLE1BQUF5QixNQUFBLEtBQUEsR0FDQUMsSUFDQTVHLEdBQUE0RyxTQUNBM0csRUFBQUgsT0FBQTJGLFFBQUEsU0FBQW9CLEdBQ0E3RyxFQUFBTyxRQUFBc0csRUFBQXhDLEtBQUE5RCxRQUNBUCxFQUFBWSxNQUFBaUcsRUFBQXhDLEtBQUF6RCxNQUNBWixFQUFBOEcsV0FBQUQsRUFBQXhDLEtBQUFrQixRQUNBbEYsRUFBQUMsUUFBQU4sRUFBQU8sUUFBQSxTQUFBQyxHQUNBQSxFQUFBSSxTQUNBUCxFQUFBQyxRQUFBTixFQUFBWSxNQUFBLFNBQUFDLEdBQ0FBLEVBQUFMLFNBQUFBLEVBQUFPLElBQUFQLEVBQUFJLE1BQUFpQixLQUFBaEIsS0FFQVIsRUFBQThCLE9BQUEzQixFQUFBSSxNQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVQsU0FHQUMsRUFBQUMsUUFBQU4sRUFBQU8sUUFBQSxTQUFBQyxHQUNBK0YsRUFBQS9GLEVBQUFKLEdBQ0F3RyxFQUFBL0UsTUFDQXJCLE9BQUFBLEVBQUFpRSxLQUNBN0MsT0FBQUUsS0FBQUMsTUFBQSxLQUFBdkIsRUFBQW9CLE9BQUEsT0FBQSxJQUNBYixHQUFBLElBQUFQLEVBQUFPLE1BR0EsSUFBQWdHLEdBQUExRyxFQUFBOEIsT0FBQXlFLEVBQUEsU0FBQXBHLEdBQ0EsTUFBQUEsR0FBQW9CLFFBRUFtRixHQUFBMUcsRUFBQTJHLE9BQUFELEVBQUEsU0FBQUUsR0FDQSxNQUFBQSxHQUFBckYsU0FFQXZCLEVBQUFDLFFBQUF5RyxFQUFBekMsVUFBQSxTQUFBOUQsRUFBQU0sR0FDQU4sRUFBQTBHLEtBQUFwRyxFQUFBLEVBQ0FkLEVBQUE0RyxNQUFBL0UsS0FBQXJCLEtBRUFMLEVBQUFDLFNDelNBaEIsUUFBQUMsT0FBQSxXQUNBOEgsUUFBQSxpQkFBQSxTQUFBQyxFQUFBQyxHQUVBRCxFQUFBRSxNQUFBLFFBQ0FDLElBQUEsSUFDQUMsWUFBQSxtQkFDQXpILFdBQUEsV0FDQTBILFNBQ0F2SCxZQUFBLFFBQUEsU0FBQVgsR0FDQSxNQUFBQSxJQUFBbUksT0FBQSxNQUFBSCxJQUFBLHVCQXNCQUksS0FBQSxTQUFBLFNBQUFDLEdBRUFBLEVBQUFDLEdBQUEiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBuZWVkcyB0byBiZSBsb2FkZWQgZmlyc3QgYmVjYXVzZSBpdCBkZWZpbmVzIHRoZSBkZXBlbmRlbmNpZXMuIFRoZSBndWxwIHRhc2sgd2lsbCBhbHdheXMgY29uY2F0IHRoaXMgdG8gdGhlIHRvcCBvZiBmaWxlXG5hbmd1bGFyLm1vZHVsZSgnd2luc3RvbicsIFsndWkucm91dGVyJ10pOyIsImFuZ3VsYXIubW9kdWxlKCd3aW5zdG9uJylcbi5zZXJ2aWNlKCdhcGlTVkMnLCBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICB0aGlzLmFkZE5ldyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zdGF0cy9hZGQnLGl0ZW0pXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9zdGF0cy9yZW1vdmUnKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RhdHMnKVxuICAgICAgICB9XG4gICAgfSk7IiwiYW5ndWxhci5tb2R1bGUoJ3dpbnN0b24nKVxuICAgIC5jb250cm9sbGVyKCdtYWluQ1RSTCcsZnVuY3Rpb24oJHNjb3BlLGFwaVNWQyxwcmVsb2FkT2JqKXtcbiAgICAgICAgJHNjb3BlLl9zaG93SW5wdXQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN0YXRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2VlaycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2cnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZ3MnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19jb21wJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXR0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcGN0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfeWRzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXZnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfdGQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19pbnQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2snLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2t5JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcmF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2Z1bScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW1fbG9zdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH07XG4gICAgICAgIHZhciBVc3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2cnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnZ3MnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19jb21wJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXR0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcGN0JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfeWRzJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfYXZnJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfdGQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19pbnQnLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2snLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG51bGxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiAncGFzc19zY2t5JyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3Bhc3NfcmF0ZScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F0dCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3lkcycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX2F2ZycsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdydXNoX3RkJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsOiBudWxsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2Z1bScsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBrZXk6ICdmdW1fbG9zdCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbnVsbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH07XG4gICAgICAgIGlmIChwcmVsb2FkT2JqLmRhdGEuc3RhdHVzID09ICdlcnInKSBjb25zb2xlLmxvZyhwcmVsb2FkT2JqLmRhdGEubWVzc2FnZSk7XG4gICAgICAgICRzY29wZS5nYW1lU3RhdHMgPSBwcmVsb2FkT2JqLmRhdGEuZGF0YS53aW5zdG9uO1xuICAgICAgICAkc2NvcGUuc3RhdHMgPSBuZXcgc3RhdHMoKTtcbiAgICAgICAgJHNjb3BlLlVzdGF0cyA9IG5ldyBVc3RhdHMoKTtcbiAgICAgICAgZnVuY3Rpb24gaW5pdFBsYXllcnMocGxheWVyT2JqKSB7XG5cbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUubmV3U3RhdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGFwaVNWQy5hZGROZXcoJHNjb3BlLlVzdGF0cykuc3VjY2VzcyhmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5Vc3RhdHMgPSBuZXcgVXN0YXRzKCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS50b2dnbGVJbnB1dCgpO1xuICAgICAgICAgICAgICAgICAgICBhcGlTVkMubG9hZCgpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdhbWVTdGF0cyA9IGRhdGEuZGF0YS53aW5zdG9uO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0Lm1lc3NhZ2UuY29uc3RyYWludCA9PSAnZ2FtZV9waycpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvcjogVGhhdCBnYW1lIGFscmVhZHkgZXhpc3RzIGluIHRoZSBkYXRhYmFzZS4gRGVsZXRlIGl0IGZpcnN0IGlmIHlvdSB3YW50IHRvIHVwZGF0ZSBpdFwiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJFcnJvcjogXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQubWVzc2FnZS5kZXRhaWwpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS50b2dnbGVJbnB1dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLl9zaG93SW5wdXQgPSAhJHNjb3BlLl9zaG93SW5wdXQ7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5kZWxldGVSb3cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuZ2FtZVN0YXRzICE9IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgYXBpU1ZDLnJlbW92ZSgpLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpU1ZDLmxvYWQoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2FtZVN0YXRzID0gZGF0YS5kYXRhLndpbnN0b247XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLm1heEdhbWVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbWF4ID0gMDtcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5nYW1lcy5sZW5ndGggPiBtYXgpIG1heCA9IHBsYXllci5nYW1lcy5sZW5ndGg7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciB3ZWVrcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBtYXggKyAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICB3ZWVrcy5wdXNoKGkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2Vla3M7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5wbGF5ZXJzID0gcHJlbG9hZE9iai5kYXRhLmRhdGEucGxheWVycztcbiAgICAgICAgJHNjb3BlLmdhbWVzID0gcHJlbG9hZE9iai5kYXRhLmRhdGEuZ2FtZXM7XG4gICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycywgZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICBwbGF5ZXIuZ2FtZXMgPSBbXTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUuZ2FtZXMsIGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wbGF5ZXIgPT09IHBsYXllci5pZCkgcGxheWVyLmdhbWVzLnB1c2goZ2FtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBhY2N1bXVsYXRlU3RhdHMgPSBmdW5jdGlvbihwbGF5ZXIsIHdlZWspIHtcbiAgICAgICAgICAgIHZhciBnYW1lcyA9IF8udGFrZShwbGF5ZXIuZ2FtZXMsIHdlZWspO1xuICAgICAgICAgICAgdmFyIHN0YXRzQ3VtID0ge1xuICAgICAgICAgICAgICAgIHBhc3NpbmdfY29tcDowLFxuICAgICAgICAgICAgICAgIHBhc3NpbmdfeWRzOiAwLFxuICAgICAgICAgICAgICAgIHBhc3NpbmdfdGQ6IDAsXG4gICAgICAgICAgICAgICAgcGFzc2luZ19hdHQ6IDAsXG4gICAgICAgICAgICAgICAgcGFzc2luZ19pbnQ6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfLmZvckVhY2goZ2FtZXMsZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfY29tcCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2NvbXAgKz0gZ2FtZS5wYXNzaW5nX2NvbXA7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ195ZHMgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ195ZHMgKz0gZ2FtZS5wYXNzaW5nX3lkcztcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3RkICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfdGQgKz0gZ2FtZS5wYXNzaW5nX3RkO1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfYXR0ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICs9IGdhbWUucGFzc2luZ19hdHQ7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19pbnQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19pbnQgKz0gZ2FtZS5wYXNzaW5nX2ludDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZnVuY3Rpb24gcmF0ZShzdGF0cykge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0cy5wYXNzaW5nX2F0dCAhPSBudWxsICYmIHN0YXRzLnBhc3NpbmdfYXR0ICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9ybXVsYSBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1Bhc3Nlcl9yYXRpbmdcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSAoc3RhdHNDdW0ucGFzc2luZ19jb21wIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgLSAuMykgKiA1O1xuICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IChzdGF0c0N1bS5wYXNzaW5nX3lkcyAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gMykgKiAuMjU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gKHN0YXRzQ3VtLnBhc3NpbmdfdGQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCkgKiAyMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAyLjM3NSAtIChzdGF0c0N1bS5wYXNzaW5nX2ludCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICogMjUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYSA+IDIuMzc1KSBhID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhIDwgMCkgYSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiID4gMi4zNzUpIGIgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGIgPCAwKSBiID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPiAyLjM3NSkgYyA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA8IDApIGMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCA+IDIuMzc1KSBkID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkIDwgMCkgZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoYSArIGIgKyBjICsgZCkgLyA2ICogMTAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGxheWVyLnJhdGluZyA9IHJhdGUoc3RhdHNDdW0pO1xuICAgICAgICAgICAgcmV0dXJuIHBsYXllcjtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnJhdGVQbGF5ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2VlayA9ICQoJyN3ZWVrMnJhdGUnKS52YWwoKS5zcGxpdCgnICcpWzFdO1xuICAgICAgICAgICAgdmFyIHJhdGVkID0gW107XG4gICAgICAgICAgICAkc2NvcGUucmF0ZWQgPSBbXTtcbiAgICAgICAgICAgIGFwaVNWQy5sb2FkKCkuc3VjY2VzcyhmdW5jdGlvbihwbGF5ZXJzT2JqKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnBsYXllcnMgPSBwbGF5ZXJzT2JqLmRhdGEucGxheWVycztcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2FtZXMgPSBwbGF5ZXJzT2JqLmRhdGEuZ2FtZXM7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdhbWVTdGF0ZXMgPSBwbGF5ZXJzT2JqLmRhdGEud2luc3RvbjtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuZ2FtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKCRzY29wZS5nYW1lcywgZnVuY3Rpb24oZ2FtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGxheWVyID09PSBwbGF5ZXIuaWQpIHBsYXllci5nYW1lcy5wdXNoKGdhbWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXy5zb3J0QnkocGxheWVyLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2FtZS53ZWVrO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlU3RhdHMocGxheWVyLHdlZWspO1xuICAgICAgICAgICAgICAgICAgICByYXRlZC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGxheWVyXCI6cGxheWVyLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInJhdGluZ1wiOk1hdGgucm91bmQoKHBsYXllci5yYXRpbmcgKyAwLjAwMDAxKSAqIDEwMCkgLyAxMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBcImlkXCI6XCJwXCIrcGxheWVyLmlkXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIHJhbmtlZCA9IF8uc29ydEJ5KHJhdGVkLCBmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsYXllci5yYXRpbmc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmFua2VkID0gXy5maWx0ZXIocmFua2VkLCBmdW5jdGlvbihwKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHAucmF0aW5nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChyYW5rZWQucmV2ZXJzZSgpLGZ1bmN0aW9uKHBsYXllciwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnJhbmsgPSBpbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yYXRlZC5wdXNoKHBsYXllcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHJhd0dyYXBoaWNzKHdlZWspO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIGRyYXdHcmFwaGljcyh3ZWVrKSB7XG4gICAgICAgICAgICBfLmZvckVhY2goJHNjb3BlLnBsYXllcnMsIGZ1bmN0aW9uKHBsYXllcikge1xuICAgICAgICAgICAgICAgIHBsYXllci5nYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUuZ2FtZXMsIGZ1bmN0aW9uKGdhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGxheWVyID09IHBsYXllci5pZCkgcGxheWVyLmdhbWVzLnB1c2goZ2FtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXy5zb3J0QnkocGxheWVyLmdhbWVzLCBmdW5jdGlvbihnYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnYW1lLndlZWs7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UmF0aW5ncyhwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGluZ3MgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXRzQ3VtO1xuICAgICAgICAgICAgICAgICAgICBfLmZvckVhY2gocGxheWVyLmdhbWVzLGZ1bmN0aW9uKGdhbWUsaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaWQgPT0gMykgY29uc29sZS5sb2coaW5kZXgsZ2FtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0YXRzQ3VtICYmIGdhbWUuZyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHNDdW0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpbmdfY29tcDowLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzaW5nX3lkczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2luZ190ZDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc2luZ19hdHQ6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3NpbmdfaW50OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2NvbXAgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19jb21wICs9IGdhbWUucGFzc2luZ19jb21wO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfeWRzICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfeWRzICs9IGdhbWUucGFzc2luZ195ZHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ190ZCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX3RkICs9IGdhbWUucGFzc2luZ190ZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX2F0dCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2F0dCArPSBnYW1lLnBhc3NpbmdfYXR0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfaW50ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfaW50ICs9IGdhbWUucGFzc2luZ19pbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICE9IG51bGwgJiYgc3RhdHNDdW0ucGFzc2luZ19hdHQgIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3JtdWxhIGZyb20gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGFzc2VyX3JhdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IChzdGF0c0N1bS5wYXNzaW5nX2NvbXAgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIC4zKSAqIDU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiID0gKHN0YXRzQ3VtLnBhc3NpbmdfeWRzIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgLSAzKSAqIC4yNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSAoc3RhdHNDdW0ucGFzc2luZ190ZCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0KSAqIDIwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IDIuMzc1IC0gKHN0YXRzQ3VtLnBhc3NpbmdfaW50IC8gc3RhdHNDdW0ucGFzc2luZ19hdHQgKiAyNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhID4gMi4zNzUpIGEgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPCAwKSBhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIgPiAyLjM3NSkgYiA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA8IDApIGIgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA+IDIuMzc1KSBjID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjIDwgMCkgYyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkID4gMi4zNzUpIGQgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPCAwKSBkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGluZyA9IChhK2IrYytkKS82KjEwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5ncy5wdXNoKHtcIndlZWtcIjppbmRleCArIDEsIFwicmF0aW5nXCI6TWF0aC5yb3VuZCgocmF0aW5nICsgMC4wMDAwMSkgKiAxMDApIC8gMTAwLFwicGlkXCI6cGxheWVyLmlkfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzdGF0c0N1bSAmJiAhZ2FtZS5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5ncy5wdXNoKHtcIndlZWtcIjppbmRleCArIDEsXCJyYXRpbmdcIjpudWxsLFwicGlkXCI6cGxheWVyLmlkfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfY29tcCAhPSBudWxsKSBzdGF0c0N1bS5wYXNzaW5nX2NvbXAgKz0gZ2FtZS5wYXNzaW5nX2NvbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ195ZHMgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ195ZHMgKz0gZ2FtZS5wYXNzaW5nX3lkcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZS5wYXNzaW5nX3RkICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfdGQgKz0gZ2FtZS5wYXNzaW5nX3RkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnYW1lLnBhc3NpbmdfYXR0ICE9IG51bGwpIHN0YXRzQ3VtLnBhc3NpbmdfYXR0ICs9IGdhbWUucGFzc2luZ19hdHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWUucGFzc2luZ19pbnQgIT0gbnVsbCkgc3RhdHNDdW0ucGFzc2luZ19pbnQgKz0gZ2FtZS5wYXNzaW5nX2ludDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHNDdW0ucGFzc2luZ19hdHQgIT0gbnVsbCAmJiBzdGF0c0N1bS5wYXNzaW5nX2F0dCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvcm11bGEgZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QYXNzZXJfcmF0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gKHN0YXRzQ3VtLnBhc3NpbmdfY29tcCAvIHN0YXRzQ3VtLnBhc3NpbmdfYXR0IC0gLjMpICogNTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSAoc3RhdHNDdW0ucGFzc2luZ195ZHMgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAtIDMpICogLjI1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IChzdGF0c0N1bS5wYXNzaW5nX3RkIC8gc3RhdHNDdW0ucGFzc2luZ19hdHQpICogMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gMi4zNzUgLSAoc3RhdHNDdW0ucGFzc2luZ19pbnQgLyBzdGF0c0N1bS5wYXNzaW5nX2F0dCAqIDI1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGEgPiAyLjM3NSkgYSA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSA8IDApIGEgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYiA+IDIuMzc1KSBiID0gMi4zNzU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiIDwgMCkgYiA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID4gMi4zNzUpIGMgPSAyLjM3NTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPCAwKSBjID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQgPiAyLjM3NSkgZCA9IDIuMzc1O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDApIGQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW5nID0gKGErYitjK2QpLzYqMTAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmdzLnB1c2goe1wid2Vla1wiOmluZGV4ICsgMSwgXCJyYXRpbmdcIjpNYXRoLnJvdW5kKChyYXRpbmcgKyAwLjAwMDAxKSAqIDEwMCkgLyAxMDAsXCJwaWRcIjpwbGF5ZXIuaWR9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYXRpbmdPYmogPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJhdGluZ3MsIGZ1bmN0aW9uKHJhdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nT2JqW3JhdGluZy53ZWVrXSA9IHJhdGluZztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaWQgPT0gMyApIHtjb25zb2xlLmxvZyhyYXRpbmdPYmopO2NvbnNvbGUubG9nKHJhdGluZ3MpfTtcbiAgICAgICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJhdGluZ09iaiwgZnVuY3Rpb24ocmF0aW5nLGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaWQgPT0gMykgY29uc29sZS5sb2cocmF0aW5nLGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyYXRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhdGluZyA9IHJhdGluZ09ialtpLTFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcud2VlaysrXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nLndlZWsgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYXRpbmcucmF0aW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW5nLnBpZCA9IHBsYXllci5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC8vZm9yICh2YXIgaSA9IDE7IGkgPCAxOTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIGlmICghcmF0aW5nT2JqW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICBpZiAoaSAhPSAxICYmIHJhdGluZ09ialtpLTFdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmF0aW5nT2JqW2ldID0gcmF0aW5nT2JqW2ktMV07XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgcmF0aW5nT2JqW2ldLndlZWsgPSBpO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICByYXRpbmdPYmpbaV0gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmF0aW5nT2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmF0aW5ncyA9IF8udmFsdWVzKGdldFJhdGluZ3MocGxheWVyKSk7XG4gICAgICAgICAgICAgICAgLy9pZiAoIXBsYXllci5pZCA9PSAxKSB3ZWVrICs9IDM7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJhdGluZ3MgPSBfLnRha2UocmF0aW5ncywgd2Vlayk7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJhdGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXIucmF0aW5ncylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkc2NvcGUucGxheWVycyxmdW5jdGlvbihwbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBwbGF5ZXIuY2xhc3NOYW1lID0gJ2phbWVpcyc7XG4gICAgICAgICAgICAgICAgaWYgKHBsYXllci5pZCAhPSAxKSBwbGF5ZXIuY2xhc3NOYW1lID0gJ290aGVyJztcbiAgICAgICAgICAgICAgICBwbGF5ZXIucmF0aW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGQsaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZC53ZWVrID0gK2Qud2VlaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmF0aW5nID0gZC5yYXRpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLnBpZCA9IHBsYXllci5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDAgJiYgcGxheWVyLnJhdGluZ3NbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci5yYXRpbmdzW2ldID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIndlZWtcIjpwbGF5ZXIucmF0aW5nc1tpXS53ZWVrICsgMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJyYXRpbmdcIjpwbGF5ZXIucmF0aW5nc1tpXS5yYXRpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGlkXCI6cGxheWVyLmlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIucmF0aW5nc1tpXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ3ZWVrXCI6IGkgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJhdGluZ1wiOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInBpZFwiOiBwbGF5ZXIuaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy9fLmZvckVhY2goJHNjb3BlLnBsYXllcnMsZnVuY3Rpb24ocGxheWVyKSB7XG4gICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZyhwbGF5ZXIubmFtZSxwbGF5ZXIucmF0aW5ncy5sZW5ndGgpO1xuICAgICAgICAgICAgLy99KTtcblxuICAgICAgICAgICAgdmFyIG1hcmdpbiA9IHt0b3A6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDUwfTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IDk2MCAtIG1hcmdpbi5yaWdodCAtIG1hcmdpbi5sZWZ0O1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IDUwMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuICAgICAgICAgICAgdmFyIHggPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbMCx3aWR0aF0pO1xuICAgICAgICAgICAgdmFyIHkgPSBkMy5zY2FsZS5saW5lYXIoKS5yYW5nZShbaGVpZ2h0LDBdKTtcbiAgICAgICAgICAgIHZhciB4QXhpcyA9IGQzLnN2Zy5heGlzKCkuc2NhbGUoeCkub3JpZW50KFwiYm90dG9tXCIpLnRpY2tWYWx1ZXMoZDMucmFuZ2UoMSx3ZWVrICsgMSkpLnRpY2tGb3JtYXQoZDMuZm9ybWF0KFwiZFwiKSk7XG4gICAgICAgICAgICB2YXIgeUF4aXMgPSBkMy5zdmcuYXhpcygpLnNjYWxlKHkpLm9yaWVudChcImxlZnRcIik7XG4gICAgICAgICAgICB2YXIgbGluZSA9IGQzLnN2Zy5saW5lKClcbiAgICAgICAgICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KGQud2Vlayl9KVxuICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZC5yYXRpbmcpfSlcbiAgICAgICAgICAgICAgICAuaW50ZXJwb2xhdGUoJ3N0ZXAtYWZ0ZXInKTtcbiAgICAgICAgICAgIHZhciBzdmcgPSBkMy5zZWxlY3QoXCIjZ3JhcGhcIikuc2VsZWN0X29yX2FwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgICAgICAgICAuc2VsZWN0X29yX2FwcGVuZChcImcuY29udGFpbmVyXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuICAgICAgICAgICAgeC5kb21haW4oWzEsIE51bWJlcih3ZWVrKV0pO1xuICAgICAgICAgICAgeS5kb21haW4oWzAsMTU4LjNdKTtcblxuXG4gICAgICAgICAgICB2YXIgbGluZXMgPSBzdmcuc2VsZWN0X29yX2FwcGVuZCgnZy5saW5lcycpLnNlbGVjdEFsbCgncGF0aCcpXG4gICAgICAgICAgICAgICAgLmRhdGEoJHNjb3BlLnBsYXllcnMucmV2ZXJzZSgpLGZ1bmN0aW9uKGQpe2lmKGQpey8qY29uc29sZS5sb2coZCk7Ki9yZXR1cm4gZC5pZDt9fSk7XG5cbiAgICAgICAgICAgIGxpbmVzLmVudGVyKCkuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihkKSB7IHJldHVybiBkLmNsYXNzTmFtZX0pXG4gICAgICAgICAgICAuYXR0cihcIm5hbWVcIixmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBmdW5jdGlvbihkKSB7cmV0dXJuIGxpbmUoZC5yYXRpbmdzKX0pO1xuXG4gICAgICAgICAgICBsaW5lcy5hdHRyKFwiY2xhc3NcIixmdW5jdGlvbihkKSB7IHJldHVybiBkLmNsYXNzTmFtZX0pXG4gICAgICAgICAgICAuYXR0cihcIm5hbWVcIixmdW5jdGlvbihkKXtyZXR1cm4gZC5uYW1lfSlcbiAgICAgICAgICAgIC50cmFuc2l0aW9uKCkuYXR0cihcImRcIiwgZnVuY3Rpb24oZCkge3JldHVybiBsaW5lKGQucmF0aW5ncyl9KTtcblxuICAgICAgICAgICAgbGluZXMuZXhpdCgpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICBzdmcuc2VsZWN0X29yX2FwcGVuZChcImcueFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgICAgICAgICBzdmcuc2VsZWN0X29yX2FwcGVuZChcImcueVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcbiAgICAgICAgICAgICAgICAuY2FsbCh5QXhpcylcbiAgICAgICAgICAgICAgICAuc2VsZWN0X29yX2FwcGVuZChcInRleHQueWF4aXNcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFwicm90YXRlKC05MClcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiw2KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuNzFlbVwiKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsXCJlbmRcIilcbiAgICAgICAgICAgICAgICAudGV4dChcIlFCIFJhdGluZyAoY3VtdWxhdGl2ZSlcIik7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG5cblxuXG5cblxuXG5cblxuIiwiYW5ndWxhci5tb2R1bGUoJ3dpbnN0b24nKVxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsIHNlYXJjaFN2Yyl7XG4gICAgICAgIC8vIFRoZXNlIHN0YXRlcyBjb3JyZXNwb25kIHRvIHRoZSBwYWdlcyBvbiB0aGUgYXBwLiBIb29rcyB1cCB0ZW1wbGF0ZXMgYW5kIHZpZXdzXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdob21lJyx7XG4gICAgICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndXBkYXRlU3RhdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbWFpbkNUUkwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgIHByZWxvYWRPYmo6IGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cCh7bWV0aG9kOidHRVQnLHVybDonL2FwaS9zdGF0cyd9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgICAgICAvLy5zdGF0ZSgnc2VhcmNoJyx7XG4gICAgICAgICAgICAvLyAgICB1cmw6ICcvc2VhcmNoJyxcbiAgICAgICAgICAgIC8vICAgIHRlbXBsYXRlVXJsOiAnc2VhcmNoLmh0bWwnLFxuICAgICAgICAgICAgLy8gICAgY29udHJvbGxlcjogJ3NlYXJjaENUUkwnLFxuICAgICAgICAgICAgLy8gICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgLy8gICAgICAgIC8vIFRoaXMgcXVlcmllcyB0aGUgc2VydmVyIGZvciBkaXN0aW5jdCBkZXBhcnRtZW50cyBhbmQgcHJlbG9hZHMgdGhlIGRlcGFydG1lbnRzIGRyb3AgZG93blxuICAgICAgICAgICAgLy8gICAgICAgIHByZWxvYWRPQko6IGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgIHJldHVybiAkaHR0cCh7bWV0aG9kOidHRVQnLHVybDonL2FwaS9kZXBhcnRtZW50cyd9KTtcbiAgICAgICAgICAgIC8vICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICB9XG4gICAgICAgICAgICAvL30pXG4gICAgICAgICAgICAvLy5zdGF0ZSgnZGV0YWlscycse1xuICAgICAgICAgICAgLy8gICAgLy8gVGhlIDppZCBpcyB0aGUgc3RyaW5nIHBhc3NlZCBpbiBmcm9tIHRoZSBVUkwgY29ycmVzcG9uZHMgdG8gdGhlIHBlcnNvbklEIGluIHRoZSB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgIC8vICAgIHVybDogJy9kZXRhaWxzLzppZCcsXG4gICAgICAgICAgICAvLyAgICB0ZW1wbGF0ZVVybDogJ2RldGFpbHMuaHRtbCcsXG4gICAgICAgICAgICAvLyAgICBjb250cm9sbGVyOiAnZGV0YWlsQ1RSTCdcbiAgICAgICAgICAgIC8vfSlcbiAgICB9XSlcbiAgICAucnVuKFsnJHN0YXRlJyxmdW5jdGlvbigkc3RhdGUpe1xuICAgICAgICAvLyBFdmVyeXRoaW5nIGluc2lkZSBoZXJlIHdpbGwgYmUgcnVuIG9uZSB0aW1lIG9uY2UgdGhlIGFwcCBoYXMgbG9hZGVkLiBHb29kIHBsYWNlIHRvIGluaXRpYWxpemUgYW55dGhpbmcgeW91IHdpbGwgYmUgdXNpbmdcbiAgICAgICAgJHN0YXRlLmdvKCdob21lJyk7XG4gICAgfV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9